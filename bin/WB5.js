(function(l){var f={browser:null,version:null,os:null,isIE:function(){return"Explorer"==f.browser},isVista:function(){return-1!=navigator.userAgent.indexOf("Windows NT 6.0")},isXP:function(){return-1!=navigator.userAgent.indexOf("Windows NT 5")},isWindows:function(){return"Windows"==f.os},isWP8:function(){return-1!=navigator.userAgent.indexOf("Windows Phone 8")},isWP7:function(){return-1!=navigator.userAgent.indexOf("Windows Phone 7")},isAndroid:function(){return-1!=navigator.userAgent.indexOf("Android")},
isIE9:function(){return this.isIE()&&9==this.getInternetExplorerVersion()},isMac:function(){return"Mac"==f.os||f.isIOS()},isIOS:function(){return"iPhone/iPod"==f.os||"iPad"==f.os},isIOSRetina:function(){return f.isIOS()&&1<window.devicePixelRatio},isMobileSafari:function(){return f.isSafari()&&f.isIOS()},isSafari:function(){return"Safari"==f.browser},isChrome:function(){return"Chrome"==f.browser},isFirefox:function(){return"Firefox"==f.browser||"Mozilla"==f.browser},isOpera:function(){return"Opera"==
f.browser},getInternetExplorerVersion:function(){var c=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(c=parseFloat(RegExp.$1));return c}};f._dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",
versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},
{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}];f._dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];f._versionSearchString=null;f.init=function(){f.browser=f._searchString(f._dataBrowser)||
"An unknown browser";f.version=f._searchVersion(navigator.userAgent)||f._searchVersion(navigator.appVersion)||"An unknown version";f.os=f._searchString(f._dataOS)||"An unknown OS"};f._searchString=function(c){for(var a=0,b=c.length;a<b;a++){var e=c[a].string,g=c[a].prop;f._versionSearchString=c[a].versionSearch||c[a].identity;if(e){if(-1!=e.indexOf(c[a].subString))return c[a].identity}else if(g)return c[a].identity}};f._searchVersion=function(c){var a=c.indexOf(f._versionSearchString);if(-1!=a)return parseFloat(c.substring(a+
f._versionSearchString.length+1))};l.BrowserDetect=f;f.init()})(null!=window.Main?window.Main:window);(function(l){function f(a,b,e,g,c,f){this.Container_constructor();this.method=f;this.color=c;this.label=g;this.name=this.id=a;this.hint=e;this.icon=b;this.type="btn";this.height=this.width=0;this.setup()}var c=createjs.extend(f,createjs.Container);c.setup=function(){var a=window.WBdraw.luma(this.color),b=window.WBdraw.getContrast50(this.color);130>a&&(b="#FFF");a=new createjs.Text(this.label,"20px Arial",b);a.textBaseline="top";a.textAlign="center";this.width=a.getMeasuredWidth()+30;this.height=a.getMeasuredHeight()+
20;a.x=this.width/2;a.y=10;b=new createjs.Shape;b.graphics.beginFill(this.color).drawRoundRect(0,0,this.width,this.height,10);this.addChild(b,a);this.on("click",this.handleClick);this.on("rollover",this.handleRollOver);this.on("rollout",this.handleRollOver);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};c.handleClick=function(a){this.method(this,this.id)};c.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};l.Button=createjs.promote(f,"Container")})(window.WBdraw);var BUILD="debug";
(function(l){function f(){}function c(a){a=mainStage.getChildByName("BASE_main");window.stats.begin();window.stats1.begin();window.stats2.begin();if(a.width!=mainStage.canvas.width||a.height!=mainStage.canvas.height)if(a.setSize(mainStage.canvas.width,mainStage.canvas.height,"#CCC"),console.log("abc tick  width:"+a.width+"  widthCvs:"+mainStage.canvas.width+"  height:"+a.height+"  heightCvs:"+mainStage.canvas.height),a=mainStage.canvas,void 0!=a){var b=mainStage.getChildByName("BASE_main"),b=new window.WBdraw.ConfigWB(BrowserDetect.os,
b.width,b.height);window.WBdraw.trace(b.width+", "+b.height+", "+b.scaleFactor);a.width=b.width;a.height=b.height;a.style.width=b.width*b.scaleFactor+"px";a.style.height=b.height*b.scaleFactor+"px"}window.stats.end();window.stats1.end();window.stats2.end()}f.main=function(){(new f).initialize()};f.prototype.initialize=function(){this.mainCanvas=document.getElementById("mainCanvas");this.mainCanvas.setStrokeStyle="#FF0000";this.mainStage=new createjs.Stage(this.mainCanvas);this.mainStage.snapToPixelsEnabled=
!0;this.mainStage.id="mainIn";window.mainStage=this.mainStage;this.mainStage.enableMouseOver(10);var a=new Stats,b=new Stats,e=new Stats;a.setMode(0);b.setMode(1);e.setMode(2);a.domElement.style.position="absolute";a.domElement.style.left="0px";a.domElement.style.bottom="10px";document.body.appendChild(a.domElement);window.stats=a;b.domElement.style.position="absolute";b.domElement.style.left="90px";b.domElement.style.bottom="10px";document.body.appendChild(b.domElement);window.stats1=b;e.domElement.style.position=
"absolute";e.domElement.style.left="180px";e.domElement.style.bottom="10px";document.body.appendChild(e.domElement);window.stats2=e;createjs.Ticker.addEventListener("tick",this.mainStage);createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED;createjs.Ticker.setFPS(60);createjs.Ticker.on("tick",c);createjs.Touch.enable(this.mainStage);this.mainStage.enableMouseOver();window.WBdraw.trace("main...start");window.WBdraw.trace(BrowserDetect.browser);window.WBdraw.trace(BrowserDetect.version);window.WBdraw.trace(BrowserDetect.os);
a=new WBdraw.WBoard("BASE_main","#ccc");WBdraw.currentBoard=a;this.mainStage.addChild(a)};l.Main=f})(window);this.ndgmr=this.ndgmr||{};
(function(l){var f=document.createElement("canvas"),c=f.getContext("2d");c.save();var a=document.createElement("canvas"),b=a.getContext("2d");b.save();var e=[],g=function(a,b){var e,g;e=p(a);g=p(b);return n(e,g)};ndgmr.checkRectCollision=g;ndgmr.checkPixelCollision=function(e,p,m,k){if(ndgmr.DEBUG||ndgmr.DEBUG_COLLISION)document.body.appendChild(f),document.body.appendChild(a);k=k||!1;intersection=g(e,p);if(!intersection)return!1;m=Math.min(.99999,m||0);f.width=intersection.width;f.height=intersection.height;
a.width=intersection.width;a.height=intersection.height;e=h(intersection,e,c,1);a:{p=h(intersection,p,b,2);var n=intersection.width,u=intersection.height,y,l,w,x,v=3,q={x:Infinity,y:Infinity,x2:-Infinity,y2:-Infinity};for(x=0;x<u;++x)for(w=0;w<n;++w){y=e.length>v+1?e[v]/255:0;l=p.length>v+1?p[v]/255:0;if(y>m&&l>m)if(k)w<q.x&&(q.x=w),w>q.x2&&(q.x2=w),x<q.y&&(q.y=x),x>q.y2&&(q.y2=x);else{e={x:w,y:x,width:1,height:1};break a}v+=4}Infinity!=q.x?(q.width=q.x2-q.x+1,q.height=q.y2-q.y+1,e=q):e=null}if(e)e.x+=
intersection.x,e.x2+=intersection.x,e.y+=intersection.y,e.y2+=intersection.y;else return!1;return e};var h=function(a,b,g,p){var c,f,h;b instanceof createjs.Bitmap?f=b.image:b instanceof createjs.Sprite&&(frame=b.spriteSheet.getFrame(b.currentFrame),c=frame.image.src+":"+frame.rect.x+":"+frame.rect.y+":"+frame.rect.width+":"+frame.rect.height,e[c]?f=e[c]:e[c]=f=createjs.SpriteSheetUtils.extractFrame(b.spriteSheet,b.currentFrame));c=b.globalToLocal(a.x,a.y);g.restore();g.save();g.rotate(k(b,"rotation")*
(Math.PI/180));g.scale(k(b,"scaleX","*"),k(b,"scaleY","*"));g.translate(-c.x-a["rect"+p].regX,-c.y-a["rect"+p].regY);void 0!=(h=b.sourceRect)?g.drawImage(f,h.x,h.y,h.width,h.height,0,0,h.width,h.height):g.drawImage(f,0,0,f.width,f.height);return g.getImageData(0,0,a.width,a.height).data},k=function(a,b,e){e=e||"+";if(a.parent&&a.parent[b]){var g=a[b];a=k(a.parent,b,e);return"*"==e?g*a:g+a}return a[b]},n=function(a,b){var e,g,p,c,f,h,k,n;e=a.x+(p=a.width/2);g=a.y+(c=a.height/2);f=b.x+(h=b.width/2);
k=b.y+(n=b.height/2);e=Math.abs(e-f)-(p+h);g=Math.abs(g-k)-(c+n);return 0>e&&0>g?(e=Math.min(Math.min(a.width,b.width),-e),g=Math.min(Math.min(a.height,b.height),-g),{x:Math.max(a.x,b.x),y:Math.max(a.y,b.y),width:e,height:g,rect1:a,rect2:b}):null};ndgmr.calculateIntersection=n;var p=function(a){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;a=a.children;var e=a.length,g,c;for(c=0;c<e;c++)g=p(a[c]),g.x<b.x&&(b.x=g.x),g.y<b.y&&(b.y=g.y),
g.x+g.width>b.x2&&(b.x2=g.x+g.width),g.y+g.height>b.y2&&(b.y2=g.y+g.height);Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{var f,h,k;a instanceof createjs.Bitmap?(g=a.sourceRect||a.image,f=g.width,h=g.height):a instanceof createjs.Sprite?a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image?(g=a.spriteSheet.getFrame(a.currentFrame),f=
g.rect.width,h=g.rect.height,e=g.regX,k=g.regY):(b.x=a.x||0,b.y=a.y||0):(b.x=a.x||0,b.y=a.y||0);e=e||0;f=f||0;k=k||0;h=h||0;b.regX=e;b.regY=k;g=a.localToGlobal(0-e,0-k);c=a.localToGlobal(f-e,h-k);f=a.localToGlobal(f-e,0-k);a=a.localToGlobal(0-e,h-k);b.x=Math.min(Math.min(Math.min(g.x,c.x),f.x),a.x);b.y=Math.min(Math.min(Math.min(g.y,c.y),f.y),a.y);b.width=Math.max(Math.max(Math.max(g.x,c.x),f.x),a.x)-b.x;b.height=Math.max(Math.max(Math.max(g.y,c.y),f.y),a.y)-b.y}return b};ndgmr.getBounds=p})(window.Main);(function(l){function f(a,b,e,g){this.Container_constructor();this.method=e;this.methodStop=g;this.color=b;this.name=this.id=a;this.type="btn";this.height=this.width=0;this.setup()}var c=createjs.extend(f,createjs.Container);c.setup=function(){this.height=this.width=30;var a=new createjs.Shape;a.graphics.beginStroke("#000");a.graphics.beginFill(this.color).drawCircle(0,0,10);this.addChild(a);this.on("click",this.handleClick);this.on("mousedown",this.handlePress);this.on("pressup",this.handleRelease);
this.on("rollover",this.handleRollOver);this.on("rollout",this.handleRollOver);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};c.handlePress=function(a){this.method(this,this.id);a.stopImmediatePropagation()};c.handleRelease=function(a){console.log("release");this.methodStop(this,this.id);a.stopImmediatePropagation()};c.handleClick=function(a){a.stopImmediatePropagation()};c.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};l.resizeBtn=createjs.promote(f,
"Container")})(window.WBdraw);var Stats=function(){function l(a,b,e){a=document.createElement(a);a.id=b;a.style.cssText=e;return a}function f(a,b,e){var g=l("div",a,"padding:0 0 3px 3px;text-align:left;background:"+e),p=l("div",a+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+b);p.innerHTML=a.toUpperCase();g.appendChild(p);a=l("div",a+"Graph","width:74px;height:30px;background:"+b);g.appendChild(a);for(b=0;74>b;b++)a.appendChild(l("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+
e));return g}function c(a){for(var b=n.children,e=0;e<b.length;e++)b[e].style.display=e===a?"block":"none";k=a}function a(a,b){a.appendChild(a.firstChild).style.height=Math.min(30,30-30*b)+"px"}var b=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,e=b(),g=e,h=0,k=0,n=l("div","stats","width:80px;opacity:0.9;cursor:pointer");n.addEventListener("mousedown",function(a){a.preventDefault();c(++k%n.children.length)},!1);var p=0,z=Infinity,A=0,m=f("fps","#0ff","#002"),
t=m.children[0],C=m.children[1];n.appendChild(m);var u=0,y=Infinity,B=0,m=f("ms","#0f0","#020"),w=m.children[0],x=m.children[1];n.appendChild(m);if(self.performance&&self.performance.memory){var v=0,q=Infinity,D=0,m=f("mb","#f08","#201"),E=m.children[0],F=m.children[1];n.appendChild(m)}c(k);return{REVISION:14,domElement:n,setMode:c,begin:function(){e=b()},end:function(){var c=b();u=c-e;y=Math.min(y,u);B=Math.max(B,u);w.textContent=(u|0)+" MS ("+(y|0)+"-"+(B|0)+")";a(x,u/200);h++;if(c>g+1E3&&(p=Math.round(1E3*
h/(c-g)),z=Math.min(z,p),A=Math.max(A,p),t.textContent=p+" FPS ("+z+"-"+A+")",a(C,p/100),g=c,h=0,void 0!==v)){var f=performance.memory.usedJSHeapSize,k=performance.memory.jsHeapSizeLimit;v=Math.round(9.54E-7*f);q=Math.min(q,v);D=Math.max(D,v);E.textContent=v+" MB ("+q+"-"+D+")";a(F,f/k)}return c},update:function(){e=this.end()}}};"object"===typeof module&&(module.exports=Stats);(function(l){function f(a,b){this.Container_constructor();this.id=this.name=a;this.color=b;this.layers={};this._tempModel=this._sandboxRect=this._isConnector=this._undoRange=this._objectInit=this.shapeNOW=this._currentdeckIndex=this.controller=null;this.setup()}function c(a){window.WBdraw.trace(this.resizer);window.WBdraw.trace("=========onSelect-=22222=======");this.resizer.handleRollOver(a);void 0==this.resizer.parent&&this.addChild(this.resizer);this.resizer.wrapTarget(this.resizer,a.param)}function a(a){window.WBdraw.trace("=========commited-========");
window.WBdraw.trace(a)}var b=createjs.extend(f,createjs.Container);b.getLayer=function(a){return this.layers[a]};b.drawinit=function(a,b,c,f){a._objectInit=!1;a._tempModel={classIn:b,type:c,path:f}};b.shapeTweenUpdate=function(a,b){b.alpha=.5;createjs.Tween.get(owner.form,{override:!0}).to({x:b.x,y:b.y,alpha:1},300,createjs.Ease.quadIn)};b.menuEventProxy=function(a){this.drawinit(this,a.param[0],a.param[1])};b.shapeStart=function(){null!=this.shapeNOW&&(console.log("...found shape in use..."),this.shapeNOW._commited||
this.shapeNOW.drawPerm(this.shapeNOW,!1));var b=this.layers.cvsMAIN,g=this._tempModel.type;switch(this._tempModel.type){case "select":break;case "ungroup":break;default:this._objectInit||(window.WBdraw.trace(" Form"+window.WBdraw.toTitleCase(this._tempModel.classIn)),g=new (WBdraw["Form"+window.WBdraw.toTitleCase(this._tempModel.classIn)])("rcolvi_"+g,g),g.x=mainStage.mouseX,g.y=mainStage.mouseY,b.addChild(g),this.shapeNOW=g,g.addEventListener("SelectEvent",c.bind(this)),g.addEventListener("CommitEvent",
a.bind(this)))}};b.drawing=function(a,b){if(0==this._objectInit&&void 0!=this.shapeNOW){var c=this.shapeNOW.bg.globalToLocal(a,b);this.shapeNOW.drawTemp(c.x,c.y)}};b.drawdone=function(a){window.WBdraw.trace("...done nwo",b);void 0!=a.shapeNOW&&a.shapeNOW.drawPerm(a.shapeNOW,!1);a.shapeNOW=null};b.clearObject=function(){this.shapeNOW=null};b.setup=function(){var a=new createjs.Shape;a.alpha=1;a.name=a.id="bg";var b=new WBdraw.Box("cvsDECK","#ccc",!0),c=new WBdraw.Box("cvsMAIN","#ccc",!0),f=new WBdraw.Box("cvsSAND",
"#ccc",!0);this.layers[b.id]=b;this.layers[c.id]=c;this.layers[f.id]=f;this.resizer=new WBdraw.FormResize("rsize","rtool");this.resizer.x=200;this.resizer.y=20;this.addChild(a,b,c,f);this.menu=new WBdraw.Menu("m1",this);this.menu.addEventListener("MenuEvent",this.menuEventProxy.bind(this));this.addChild(this.menu);this.on("click",this.handleClick);this.on("mousedown",this.handlePress);this.on("pressup",this.handleRelease);this.offset=10*Math.random();this.count=0;this.test_draw("line","free")};b.width=
0;b.height=0;b.setSize=function(a,g,c){var f=this.getChildByName("bg");console.log("resizeBy");f.graphics.clear().beginStroke("#ccc").beginFill(c).drawRect(0,0,a,g);for(var n in this.layers)this.layers[n].setSize(a,g,c);b.width=a;b.height=g};b.getWidth=function(){console.log("get width");return width};b.wbRegister=function(a,b){};b.clear=function(a,b){};b.wbSwitch=function(a){};b.unshift=function(a){};b.push=function(a){};b.handleClick=function(a){window.WBdraw.trace("click1")};b.handlePress=function(a){console.log("pressing.33gfw...");
this.shapeStart();this.on("pressmove",this.drawLine);a.stopImmediatePropagation()};b.handleRelease=function(a){this.drawdone(this);this.off("pressmove",this.drawLine)};b.drawLine=function(a){this.drawing(mainStage.mouseX,mainStage.mouseY)};b.endDraw=function(a){window.WBdraw.trace("enddraw1");this.off("pressmove",this.drawLine)};b.test_draw=function(a,b){window.WBdraw.trace("enddraw1");this.drawinit(this,a,b)};createjs.EventDispatcher.initialize(f.prototype);l.WBoard=createjs.promote(f,"Container")})(window.WBdraw);(function(l){function f(a,b,e){this.Container_constructor();this.id=this.name=a;this.transparent=e;this.color=b;this.setup()}var c=createjs.extend(f,createjs.Container);c.setup=function(){var a=new createjs.Shape;a.alpha=1;a.name=a.id="bg";this.on("click",this.handleClick);this.on("mousedown",this.handlePress);this.on("pressup",this.handleRelease);this.on("pressmove",this.drawLine);console.log("box1");this.offset=10*Math.random();this.count=0};c.width=0;c.height=0;c.setSize=function(a,b,e){c.width=
a;c.height=b;if(!this.transparent){var g=this.getChildByName("bg");console.log("resizerrrBy");g.graphics.clear().beginStroke("#ccc").beginFill(e).drawRect(0,0,a,b);this.cache(0,0,a,b)}};c.getWidth=function(){console.log("get width");return width};c.handleClick=function(a){console.log("click");a.stopImmediatePropagation()};c.handlePress=function(a){console.log(a);console.log("press")};c.handleRelease=function(a){console.log("release");a.stopImmediatePropagation()};c.drawLine=function(a){console.log("draw");
a.stopImmediatePropagation()};c.endDraw=function(a){console.log("enddraw");a.stopImmediatePropagation()};l.Box=createjs.promote(f,"Container")})(window.WBdraw);(function(l){function f(a,b){this.Container_constructor();this.id=this.name=a;this.color="";this.type=b;this.limitDraw=!1;this.rect=null;this.segSize=12;this.regY=this.regX=0;this.scaled=!1;this.rel=null;this.setup()}createjs.EventDispatcher.initialize(f.prototype);var c=createjs.extend(f,createjs.Container);c.setup=function(){this.points=[];this.bg=new createjs.Shape;this.hitHelper=new createjs.Shape;this.bg.hitArea=this.hitHelper;this.addChild(this.bg);this.on("mousedown",this.handlePress);this.on("pressup",
this.handleRelease);this.on("pressmove",this.moveLocally);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};c.drawTemp=function(a,b){this.uncache();c[this.type](this,a,b)};c.drawPerm=function(a,b){if(a.id==this.id){try{var e=c[this.type+"Perm"](this,a,b)}catch(g){throw console.log(g),"[E] No function matches:"+this.type+"Perm() in FormLine (wbFormLine.js)";}var f={type:"CommitEvent",param:this};e&&this.dispatchEvent(f)}};c.width=0;c.height=0;c.setSize=function(a,
b,e){};c.getWidth=function(){return width};c.moveLocally=function(a){this.x=a.stageX-this.rel.x+this.regX;this.y=a.stageY-this.rel.y+this.regY;update=!0;a.stopImmediatePropagation()};c.moveSTART=function(a){a.stopImmediatePropagation();for(var b=a.target,e,g=b.getObjectsUnderPoint(b.mouseX,b.mouseY,1),c=0;c<g.length;c++)if(g[c].parent.scaled){e=g[c].parent;break}null!=e&&(e.x=b.mouseX-e.rel.x+e.regX,e.y=b.mouseY-e.rel.y+e.regY,console.log(e.rel+","+e.regX),console.log(a))};c.moveEND=function(a){a=
a.target;var b;a=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1);for(var e=0;e<a.length;e++)if(a[e].parent.scaled){b=a[e].parent;break}null!=b&&(b.scaled=!1,createjs.Tween.get(b,{override:!0}).to({scaleX:1,scaleY:1},100,createjs.Ease.quadIn))};c.handlePress=function(a){mainStage.addEventListener("stagemousemove",this.moveSTART);mainStage.addEventListener("stagemouseup",this.moveEND);this.scaled||(createjs.Tween.get(this,{override:!0}).to({scaleX:1.05,scaleY:1.05},100,createjs.Ease.quadIn),this.scaled=
!0,this.rel=this.globalToLocal(mainStage.mouseX,mainStage.mouseY),a.stopImmediatePropagation())};c.handleRelease=function(a){mainStage.removeEventListener("stagemousemove",this.moveSTART);mainStage.removeEventListener("stagemouseup",this.moveEND);a.stopImmediatePropagation();this.dispatchEvent({type:"SelectEvent",param:this})};c.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};c.square=function(a,b,e){b=new createjs.Point(b,e);e=a.bg.graphics;e.clear();a.points=[];e.setStrokeStyle(5);
e.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));e.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));e.rect(0,0,b.x,b.y);a.points.push(b);e.endStroke();e.endFill()};c.squarePerm=function(a,b,e){b=a.bg.graphics;e=a.bg.hitArea.graphics;b.clear();e.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;lc=a.points[0];a.regX=0>lc.x?-Math.abs(.5*lc.x):Math.abs(.5*lc.x);a.x+=a.regX;a.regY=
0>lc.y?-Math.abs(.5*lc.y):Math.abs(.5*lc.y);a.y+=a.regY;var g=Math.floor(lc.x),c=Math.floor(lc.y);a.width=Math.abs(g);a.height=Math.abs(c);b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));b.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));e.setStrokeStyle(10);e.beginStroke("#000");e.beginFill("red");e.rect(0,0,g,c);b.rect(0,0,g,c);b.endStroke();e.endStroke();e.endFill();b.endFill();a.cache(-5,-5,g+10,c+10);return!0};c.circle=function(a,b,e){b=new createjs.Point(b,
e);e=a.bg.graphics;e.clear();a.points=[];e.setStrokeStyle(5);e.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));e.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));e.drawEllipse(0,0,b.x,b.y);a.points.push(b);e.endStroke();e.endFill()};c.circlePerm=function(a,b,e){b=a.bg.graphics;e=a.bg.hitArea.graphics;b.clear();e.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;lc=a.points[0];
a.regX=0>lc.x?-Math.abs(.5*lc.x):Math.abs(.5*lc.x);a.x+=a.regX;a.regY=0>lc.y?-Math.abs(.5*lc.y):Math.abs(.5*lc.y);a.y+=a.regY;var g=Math.floor(lc.x),c=Math.floor(lc.y);a.width=Math.abs(g);a.height=Math.abs(c);b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));b.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));e.setStrokeStyle(10);e.beginStroke("#000");e.beginFill("red");e.drawEllipse(0,0,g,c);b.drawEllipse(0,0,g,c);window.WBdraw.trace();b.endStroke();
e.endStroke();e.endFill();b.endFill();a.cache(-5,-5,g+10,c+10);return!0};c.star=function(a,b,e){new createjs.Point(b,e);var g={},c=a.bg.graphics;c.clear();a.points=[];c.setStrokeStyle(5);c.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));c.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));console.log("---=-=-=--=-=-=-=-=>>>>");g.radius=b/mainStage.canvas.width*200;g.pointy=e/mainStage.canvas.height*.9;g.points=5;c.drawPolyStar(0,0,g.radius,g.points,g.pointy,-90);a.points.push(g);
c.endStroke();c.endFill()};c.starPerm=function(a,b,e){b=a.bg.graphics;e=a.bg.hitArea.graphics;b.clear();e.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;sPos=a.points[0];a.width=Math.abs(Math.floor(2*sPos.radius));a.height=Math.abs(Math.floor(2*sPos.radius));b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));b.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));
e.setStrokeStyle(10);e.beginStroke("#000");e.beginFill("red");e.drawPolyStar(0,0,sPos.radius,sPos.points,sPos.pointy,-90);b.drawPolyStar(0,0,sPos.radius,sPos.points,sPos.pointy,-90);a.x-=sPos.radius;a.y-=sPos.radius;this.x+=sPos.radius;this.y+=sPos.radius;b.endStroke();e.endStroke();e.endFill();b.endFill();return!0};l.FormFill=createjs.promote(f,"Container")})(window.WBdraw);(function(l){function f(a,b){this.Container_constructor();this.id=this.name=a;this.color="";this.type=b;this.limitDraw=!1;this.rect=null;this.segSize=12;this.regY=this.regX=0;this.scaled=!1;this.rel=null;this.setup()}createjs.EventDispatcher.initialize(f.prototype);var c=createjs.extend(f,createjs.Container);c.setup=function(){this.points=[];this.bg=new createjs.Shape;this.hitHelper=new createjs.Shape;this.bg.hitArea=this.hitHelper;this.addChild(this.bg);this.on("mousedown",this.handlePress);this.on("pressup",
this.handleRelease);this.on("pressmove",this.moveLocally);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};c.drawTemp=function(a,b){c[this.type](this,a,b)};c.drawPerm=function(a,b){if(a.id==this.id){try{var e=c[this.type+"Perm"](this,a,b)}catch(g){throw console.log(g),"[E] No function matches:"+this.type+"Perm() in FormLine (wbFormLine.js)";}var f={type:"CommitEvent",param:this};e&&this.dispatchEvent(f)}};c.width=0;c.height=0;c.setSize=function(a,b,e){};c.getWidth=
function(){return width};c.moveLocally=function(a){this.x=a.stageX-this.rel.x+this.regX;this.y=a.stageY-this.rel.y+this.regY;update=!0;a.stopImmediatePropagation()};c.moveSTART=function(a){a.stopImmediatePropagation();a=a.target;for(var b,e=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1),c=0;c<e.length;c++)if(e[c].parent.scaled){b=e[c].parent;break}null!=b&&(b.x=a.mouseX-b.rel.x+b.regX,b.y=a.mouseY-b.rel.y+b.regY,console.log(b.rel+","+b.regX))};c.moveEND=function(a){a=a.target;var b;a=a.getObjectsUnderPoint(a.mouseX,
a.mouseY,1);for(var e=0;e<a.length;e++)if(a[e].parent.scaled){b=a[e].parent;break}null!=b&&(b.scaled=!1,createjs.Tween.get(b,{override:!0}).to({scaleX:1,scaleY:1},100,createjs.Ease.quadIn))};c.handlePress=function(a){mainStage.addEventListener("stagemousemove",this.moveSTART);mainStage.addEventListener("stagemouseup",this.moveEND);this.scaled||(createjs.Tween.get(this,{override:!0}).to({scaleX:1.05,scaleY:1.05},100,createjs.Ease.quadIn),this.scaled=!0,this.rel=this.globalToLocal(mainStage.mouseX,
mainStage.mouseY),a.stopImmediatePropagation())};c.handleRelease=function(a){mainStage.removeEventListener("stagemousemove",this.moveSTART);mainStage.removeEventListener("stagemouseup",this.moveEND);a.stopImmediatePropagation();this.dispatchEvent({type:"SelectEvent",param:this})};c.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};c.straight=function(a,b,e){b=new createjs.Point(b,e);e=a.bg.graphics;e.clear();a.points=[];e.setStrokeStyle(5);d=Math.sqrt(b.x*b.x+b.y*b.y);r=d%a.segSize;tot=
d/a.segSize;for(var c=0,f=0,k=0;k<tot;++k){var n=k/tot*b.x,p=k/tot*b.y;e.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));e.moveTo(c,f);e.lineTo(n,p);c=n;f=p}e.moveTo(c,f);e.lineTo(b.x,b.y);a.points.push(b);e.endStroke()};c.straightPerm=function(a,b,e){b=a.bg.graphics;e=a.bg.hitArea.graphics;b.clear();e.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;lc=a.points[0];a.regX=0>lc.x?-Math.abs(.5*
lc.x):Math.abs(.5*lc.x);a.x+=a.regX;a.regY=0>lc.y?-Math.abs(.5*lc.y):Math.abs(.5*lc.y);a.y+=a.regY;b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));e.setStrokeStyle(10);e.beginStroke("#000");e.beginFill("red");e.moveTo(0,0);b.moveTo(0,0);b.lineTo(lc.x,lc.y);e.lineTo(lc.x,lc.y);b.endStroke();e.endStroke();e.endFill();a.setDimension(a,lc.x,lc.y);return!0};c.free=function(a,b,e){var c=a.bg.graphics,f=a.points[a.points.length-1],k=0;b=new createjs.Point(b,e);c.setStrokeStyle(5);
c.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));void 0==f&&(f=new createjs.Point(0,0));k=b.y;e=f.x;var n=f.y,k=Math.sqrt((e-=b.x)*e+(n-=k)*n);k>a.segSize&&(c.moveTo(f.x,f.y),c.lineTo(b.x,b.y),c.endStroke(),a.points.push(b))};c.freePerm=function(a,b,e){b=a.bg.graphics;e=a.bg.hitArea.graphics;console.log(a);var c=a.points.length;if(0==c)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;new createjs.Point(0,0);b.clear();
b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));e.setStrokeStyle(10);e.beginStroke("#000");e.beginFill("red");for(var f=0,k=0,n=0,p=0,z=0,A=0,m=0;m<c;++m){var t=a.points[m];t.x>k&&(k=t.x);t.y>f&&(f=t.y);t.x<n&&(n=t.x);t.y<p&&(p=t.y)}0>n&&(z=n);0>p&&(A=p);for(m=0;m<c;++m)a.points[m].x+=Math.abs(z),a.points[m].y+=Math.abs(A),t=a.points[m],0==m&&(e.moveTo(t.x,t.y),b.moveTo(t.x,t.y)),b.lineTo(t.x,t.y),e.lineTo(t.x,t.y);b.endStroke();e.endStroke();e.endFill();a.x+=
z;a.y+=A;a.rect=new createjs.Rectangle(0,0,Math.abs(z)+k,Math.abs(A)+f);b=.5*a.rect.width;e=.5*a.rect.height;a.x-=b;a.y-=e;a.regX=b;a.x+=2*b;a.regY=e;a.y+=2*e;a.setDimension(a,a.rect.width,a.rect.height);return!0};c.bezier=function(a,b,e){var c={x:0,y:0},f=a.bg.graphics;e=new createjs.Point(b,e);f.clear();a.points=[];f.setStrokeStyle(5);b=Math.round(e.x);e=Math.round(e.y);c.fx=b;c.cx=c.fx;c.fy=e;c.cy=c.y;f.setStrokeStyle(1);f.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));f.moveTo(c.fx,
c.fy);f.lineTo(c.cx,c.cy);f.lineTo(c.x,c.y);f.setStrokeStyle(5);f.bezierCurveTo(c.fx,c.fy,c.cx,c.cy,c.x,c.y);a.points.push(c);f.endStroke()};c.bezierPerm=function(a,b,e){var c=a.points.length;b=a.bg.graphics;e=a.bg.hitArea.graphics;b.clear();e.clear();if(0==c)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;c=a.points[0];e.setStrokeStyle(25);e.beginStroke("#000");b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));
b.bezierCurveTo(c.fx,c.fy,c.cx,c.cy,c.x,c.y);e.bezierCurveTo(c.fx,c.fy,c.cx,c.cy,c.x,c.y);b.endStroke();e.endStroke();a.setDimension(a,c.cx,c.fy);return!0};c.connector=function(a,b,c){};c.connectorPerm=function(a,b,c){};c.connectorFollowEdge=function(a,b,c){point=new createjs.Point(b.x+.5*b.width,b.y+.5*b.height);target=new createjs.Point(c.x+.5*c.width,c.y+.5*c.height);b=point.x-target.x;var f=point.y-target.y;a=f;b>f&&(a=b);b=Math.atan2(target.Y-point.Y,target.X-point.X);for(var f=canvas.getContext("2d"),
h=0;h<a;++h){var k=2*Math.sin(b),n=2*Math.cos(b),k=new createjs.Point(c.x+n,c.y+k),k=f.getImageData(k.x,k.y,2,2).data,k="rgba("+k[pos]+","+k[pos+1]+","+k[pos+2]+","+k[pos+3]+")";"#CCCCCC"==k&&console.log("pixel found::"+k);console.log(" found::"+k)}};c.setDimension=function(a,b,c){a.width=Math.abs(b);a.height=Math.abs(c);console.log(a.width+"x"+a.height)};l.FormLine=createjs.promote(f,"Container")})(window.WBdraw);(function(l){function f(a,b){this.Container_constructor();this.id=this.name=a;this.color="";this.type=b;this.limitDraw=!1;this.rect=null;this.segSize=12;this.tolerance=10;this.regY=this.regX=0;this.scaled=!1;this.boxr=this.box4=this.box3=this.box2=this.box1=this.formTarget=this.rel=null;this.setup();console.log("@@@@@@  NEW FormResize  ")}function c(a,c){if(-1!=c.indexOf("r"))a.on("pressmove",b.bind(this));else a.on("pressmove",e.bind(this));return""}function a(a,b){a.off("pressmove");var c=this.formTarget.globalToLocal(2*
this.box4.x,2*this.box4.y);console.log("......done........"+this.x+"X"+this.y+"   "+c.x+"X"+c.y);this.rotation=this.formTarget.rotation;console.log(this.formTarget.type);switch(this.formTarget.type){case "bezier":break;case "free":break;default:this.formTarget.x=this.x-this.box4.x+this.tolerance,this.formTarget.y=this.y-this.box4.y+this.tolerance,this.formTarget.drawTemp(2*this.box4.x-2*this.tolerance,2*this.box4.y-2*this.tolerance),this.formTarget.drawPerm(this.formTarget)}return""}function b(a){a=
this.globalToLocal(a.stageX,a.stageY);var b;b=0-Math.sqrt(Math.abs(a.x-0)*Math.abs(a.x-0)+Math.abs(a.y-0)*Math.abs(a.y-0));b=360*Math.atan2(a.y-b,a.x-0)/Math.PI;console.log("x1:"+this.boxr.x+" y1:"+this.boxr.y+" sx:"+a.x+"  sy:"+a.y);console.log(b);this.formTarget.rotation=b+this.rotation}function e(a){console.log(a);var b=a.currentTarget;a=this.globalToLocal(a.stageX,a.stageY);console.log("==============>>>>>>>>>>>"+this.formTarget.type);switch(this.formTarget.type){case "bezier":break;case "bx3":break;
default:if(a.x>this.box1.x+30&&a.y>this.box1.y+30){this.box4.x=a.x;this.box4.y=a.y;var c=Math.ceil(.5*a.x),e=Math.ceil(.5*a.y);g(this,2*c,2*e,b.name);h(this.bg,Math.ceil(a.x),Math.ceil(a.y))}}}function g(a,b,c,e){switch(a.formTarget.type){case "bezier":a.box1.x=a.formTarget;break;case "bx3":break;default:a.box1.x=a.box3.x=0-b,a.box1.y=a.box2.y=0-c,a.box2.x=b,a.box3.y=c,"bx4"!=e&&(a.box4.x=b,a.box4.y=c),a.boxr.x=0,a.boxr.y=-60-c}}function h(a,b,c){a=a.graphics;a.clear();a.beginStroke("red");a.setStrokeStyle(2);
var e=new createjs.Point(-b,-c),f=new createjs.Point(0,0),g=new createjs.Point(b,-c),n=new createjs.Point(b,c),h=new createjs.Point(-b,c);b=new createjs.Point(b,c);c=new createjs.Point(0,-60-c);k(a,e,g,!1);k(a,e,h,!0);k(a,h,n,!1);k(a,g,b,!0);k(a,c,f,!0)}function k(a,b,c,e){dx1=b.x;var f=dx2=c.x;dy1=b.y;c=dy2=c.y;d=Math.sqrt((dx2-=dx1)*dx2+(dy2-=dy1)*dy2);tot=d/12;var g=b.x;b=b.y;console.log(b);for(var k=d/tot,n=0;n<=tot;++n){if(e){var h=Math.ceil(b+k),l=f;b=h<b?b-2:b+2;if(h>Math.abs(c))break}else{var l=
Math.ceil(g+k),h=c,g=l<g?g-2:g+2;if(Math.abs(l)>Math.abs(f))break}a.moveTo(g,b);a.lineTo(l,h);g=l;b=h}}createjs.EventDispatcher.initialize(f.prototype);var n=createjs.extend(f,createjs.Container);n.setup=function(){this.points=[];this.bg=new createjs.Shape;this.box1=new WBdraw.resizeBtn("bx1","#FFF",c.bind(this),a.bind(this));this.box2=new WBdraw.resizeBtn("bx2","#FFF",c.bind(this),a.bind(this));this.box3=new WBdraw.resizeBtn("bx3","#FFF",c.bind(this),a.bind(this));this.box4=new WBdraw.resizeBtn("bx4",
"#FFF",c.bind(this),a.bind(this));this.boxr=new WBdraw.resizeBtn("bxr","#FFF",c.bind(this),a.bind(this));this.addChild(this.bg,this.box1,this.box2,this.box3,this.box4,this.boxr);this.offset=10*Math.random();this.count=0};n.width=0;n.height=0;n.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};n.wrapTarget=function(a,b){console.log("----------------\x3e>resizer"+this.rotation);this.rotation=b.rotation;console.log(b);a.formTarget=b;a.x=b.x;a.y=b.y;var c=Math.ceil(.5*b.width)+this.tolerance,
e=Math.ceil(.5*b.height)+this.tolerance;g(a,c,e,"");h(this.bg,c,e)};n.straight=function(a,b,c){b=a.bg.globalToLocal(b,c);c=a.bg.graphics;c.clear();a.points=[];c.setStrokeStyle(5);d=Math.sqrt(b.x*b.x+b.y*b.y);r=d%a.segSize;tot=d/a.segSize;for(var e=0,f=0,g=0;g<tot;++g){var k=g/tot*b.x,n=g/tot*b.y;c.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));c.moveTo(e,f);c.lineTo(k,n);e=k;f=n}c.moveTo(e,f);c.lineTo(b.x,b.y);a.points.push(b);c.endStroke()};n.straightPerm=function(a,b,c){b=a.bg.graphics;
c=a.bg.hitArea.graphics;b.clear();c.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;lc=a.points[0];b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));c.setStrokeStyle(10);c.beginStroke("#000");c.beginFill("red");c.moveTo(0,0);b.moveTo(0,0);b.lineTo(lc.x,lc.y);c.lineTo(lc.x,lc.y);b.endStroke();c.endStroke();c.endFill();return!0};l.FormResize=createjs.promote(f,"Container")})(window.WBdraw);(function(l){function f(a,b,c,f){this.Container_constructor();this.id=this.name=a;this.color=f;this.type=c;this.label=b;this.setup()}var c=createjs.extend(f,createjs.Container);c.setup=function(){var a=new createjs.Text(this.label,"20px Arial","#000");a.name=a.id="txt";a.textBaseline="top";a.textAlign="center";var b=a.getMeasuredWidth()+30,c=a.getMeasuredHeight()+20;a.x=b/2;a.y=10;var f=new createjs.Shape;f.name=f.id="bg";f.graphics.setStrokeStyle(5);f.graphics.beginStroke("#"+Math.floor(16777215*
Math.random()).toString(16));f.graphics.beginFill(this.color).drawRoundRect(0,0,b,c,10);this.addChild(f,a);this.on("click",this.handleClick);this.on("rollover",this.handleRollOver);this.on("rollout",this.handleRollOver);this.on("mousedown",this.handlePress);this.on("pressup",this.handleRelease);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};c.handleClick=function(a){};c.hello=function(a){console.log(a);c.width=100};c.width=0;c.height=0;c.setSize=function(a,
b,e){target.getChildByName("bg").graphics.clear().beginStroke("#ccc").beginFill("#"+Math.floor(16777215*Math.random())).drawRect(0,0,a,b);c.width=a;c.height=b};c.getWidth=function(){return width};c.handlePress=function(a){mainStage.addEventListener("stagemousemove",this.drawLine);mainStage.addEventListener("stagemouseup",this.endDraw);console.log(this.id);this.scaled||(createjs.Tween.get(this,{override:!0}).to({scaleX:1.1,scaleY:1.1},100,createjs.Ease.quadIn),this.scaled=!0,this.rel=this.globalToLocal(mainStage.mouseX,
mainStage.mouseY))};c.handleRelease=function(a){mainStage.removeEventListener("stagemousemove",this.drawLine);mainStage.removeEventListener("stagemouseup",this.endDraw);this.dispatchEvent({type:"SelectEvent",param:this})};c.drawLine=function(a){a=a.target;for(var b,c=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1),f=0;f<c.length;f++)if(c[f].parent.scaled){b=c[f].parent;break}null!=b&&(b.x=a.mouseX-b.rel.x,b.y=a.mouseY-b.rel.y,b.getChildByName("bg").graphics.clear().beginStroke("#"+Math.floor(16777215*
Math.random())).beginFill("#"+Math.floor(16777215*Math.random())).drawRect(0,0,a.mouseX,a.mouseY))};c.endDraw=function(a){a=a.target;var b;a=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1);for(var c=0;c<a.length;c++)if(a[c].parent.scaled){b=a[c].parent;break}console.log(b.scaled);null!=b&&(b.scaled=!1,createjs.Tween.get(b,{override:!0}).to({scaleX:1,scaleY:1},100,createjs.Ease.quadIn))};c.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};l.FormShape=createjs.promote(f,"Container")})(window.WBdraw);(function(l){function f(a,b){this.Container_constructor();this.id=this.name=a;this.color=b;this.hi_Y=0;this.Controller=null;this.matrix=new createjs.Matrix2D;this.angle=Math.PI/12;this.currentMenu="";this.options={};this.subscriberWL={select:!0,line:!0,fill:!0,math:!0,media:!0,select:!1,print:!0,clear:!0,"delete":!0};this.hostWL={select:!0,line:!0,fill:!0,math:!0,media:!0,select:!0,print:!0,clear:!0,"delete":!0};this.options.BR=[{name:"select",btns:{icon:"ss.png",hint:"select opject",action:"select"}},
{name:"line",btns:{icon:"ss.png",hint:"line",">":[{name:"free",icon:"ss.png",action:"method1",hint:""},{name:"straight",icon:"ss.png",action:"method1",hint:""},{name:"bezier",icon:"ss.png",action:"method1",hint:""}]}},{name:"fill",btns:{icon:"ss.png",hint:"fill",">":[{name:"square",icon:"ss.png",action:"method1",hint:""},{name:"circle",icon:"ss.png",action:"method1",hint:""},{name:"star",icon:"ss.png",action:"method1",hint:""}]}},{name:"math",btns:{icon:"ss.png",hint:"math",">":[{name:"sqrt",icon:"ss.png",
action:"method1",hint:""},{name:"axis",icon:"ss.png",action:"method1",hint:""},{name:"graph",icon:"ss.png",action:"method1",hint:""}]}},{name:"media",btns:{icon:"ss.png",hint:"media",">":[{name:"ppt",icon:"ss.png",action:"method1",hint:""},{name:"video",icon:"ss.png",action:"method1",hint:""}]}},{name:"select_area",btns:{icon:"ss.png",hint:"selectable area",">":[{name:"add",icon:"ss.png",action:"method1",hint:""},{name:"remove",icon:"ss.png",action:"method1",hint:""}]}},{name:"print",btns:{icon:"ss.png",
hint:"selectable area",action:"print"}},{name:"clear",btns:{icon:"ss.png",hint:"selectable area",action:"print"}},{name:"delete",btns:{icon:"ss.png",hint:"selectable area",action:"print"}}];this.options.EN=[{name:"select",btns:{icon:"ss.png",hint:"select opject",action:"select"}},{name:"line",btns:{icon:"ss.png",hint:"line",">":[{name:"free",icon:"ss.png",action:"method1",hint:""},{name:"straight",icon:"ss.png",action:"method1",hint:""},{name:"bezier",icon:"ss.png",action:"method1",hint:""}]}},{name:"fill",
btns:{icon:"ss.png",hint:"fill",">":[{name:"square",icon:"ss.png",action:"method1",hint:""},{name:"circle",icon:"ss.png",action:"method1",hint:""},{name:"star",icon:"ss.png",action:"method1",hint:""}]}},{name:"math",btns:{icon:"ss.png",hint:"math",">":[{name:"sqrt",icon:"ss.png",action:"method1",hint:""},{name:"axis",icon:"ss.png",action:"method1",hint:""},{name:"graph",icon:"ss.png",action:"method1",hint:""}]}},{name:"media",btns:{icon:"ss.png",hint:"media",">":[{name:"ppt",icon:"ss.png",action:"method1",
hint:""},{name:"video",icon:"ss.png",action:"method1",hint:""}]}},{name:"select_area",btns:{icon:"ss.png",hint:"selectable area",">":[{name:"add",icon:"ss.png",action:"method1",hint:""},{name:"remove",icon:"ss.png",action:"method1",hint:""}]}},{name:"print",btns:{icon:"ss.png",hint:"selectable area",action:"print"}},{name:"clear",btns:{icon:"ss.png",hint:"selectable area",action:"print"}},{name:"delete",btns:{icon:"ss.png",hint:"selectable area",action:"print"}}];this.setup()}function c(a,c){b(a.parent.parent)}
function a(a,b){}function b(a){createjs.Tween.get(a.submenu,{override:!0}).to({x:a.menucontain.width,scaleX:0},250,createjs.Ease.quadIn);createjs.Tween.get(a.menucontain,{override:!0}).to({x:0,scaleX:1},250,createjs.Ease.quadIn);window.WBdraw.trace("-----\x3eOUT");window.WBdraw.trace(a);window.WBdraw.trace(a.hi_Y);if(0!=a.hi_Y){var b=a.getChildByName("hi");createjs.Tween.get(b,{override:!0}).to({y:a.hi_Y},250,createjs.Ease.quadIn)}}function e(a,b){var e=a.parent.parent;void 0==e.options&&console.log("[E] submenu functions out of context. Please make sure function is delegated");
var f=void 0;null==f&&(f="EN");var h=e.options[f];stot=h.length;f=e.hostWL=null;if(e.submenu.currentMenu!=b){e.submenu.requestedMenu(b);e.submenu.removeAllBtns();var m=new WBdraw.Button("back","back.png","back to menu","back","#999",c);e.submenu.addChild(m);f=m;for(m=0;m<stot;++m){var l=h[m];if(e.subscriberWL[l.name]&&l.name==b){h=l.btns[">"];stot=h.length;for(l=0;l<stot;++l)m=new WBdraw.Button(h[l].name,h[l].icon,h[l].hint,h[l].name,"#"+Math.floor(16777215*Math.random()).toString(16),g),null!=f?
(m.x=0,m.y=f.y+f.height+10):m.x=m.y=0,m.alpha=.5,e.submenu.addChild(m),f=m;break}}window.WBdraw.trace(".........FINISHED ");e.submenu.setSize(e.menucontain.width,e.menucontain.height,"#"+Math.floor(16777215*Math.random()).toString(16),!0);e.submenu.x=e.menucontain.width;e.submenu.scaleX=0}createjs.Tween.get(e.submenu,{override:!0}).to({x:0,scaleX:1},250,createjs.Ease.quadIn);createjs.Tween.get(e.menucontain,{override:!0}).to({x:0,scaleX:.01},250,createjs.Ease.quadIn);window.WBdraw.trace("-----\x3eIN");
window.WBdraw.trace(e.hi_Y);0!=e.hi_Y&&(e=e.getChildByName("hi"),createjs.Tween.get(e,{override:!0}).to({y:-20},250,createjs.Ease.quadIn))}function g(a,c){var e=a.parent.parent;console.log(a.height);var f=e.getChildByName("hi");console.log(e.submenu);var g="",h="",l;if(""==e.submenu.currentMenu)g=a.name,l=a;else{l=e.menucontain.getChildByName(e.submenu.currentMenu);var C=4,u;a:{u=e.options.EN;tot=u.length;for(var y=0;y<tot;++y){var B=u[y],w=B.btns[">"];if(void 0!=w)for(var x=w.length,v=0;v<x;++v)if(w[v].name==
a.name){u=[B.name,a.name];break a}}u=[a.name]}1<u.length&&(g=u[0],h=u[1])}f.x=e.menucontain.x+e.menucontain.width;e.hi_Y=l.y;e.setHiSize(C,l.height,"#FF0000");window.WBdraw.trace("---==>> ||>>  main:"+g+"  sub:"+h);window.WBdraw.trace("........---------__bb__---\x3e>>>>   event Controller>>>>>   ");e.dispatchEvent({type:"MenuEvent",param:[g,h]});0==e.submenu.x&&b(e)}createjs.EventDispatcher.initialize(f.prototype);var h=createjs.extend(f,createjs.Container);h.getLayer=function(a){return this.layers[a]};
h.hi_Y=0;h.width=0;h.height=0;h.setup=function(){var a=new createjs.Shape,b=new createjs.Shape;a.alpha=1;a.name=a.id="bg";b.alpha=1;b.name=b.id="hi";this.menucontain=new WBdraw.MenuBar("wbmenu");this.submenu=new WBdraw.MenuBar("sub_wbmenu");this.menubuttons(this.options);this.addChild(a,this.menucontain,b,this.submenu);window.WBdraw.trace("box1");this.offset=10*Math.random();this.count=0};h.setSize=function(a,b,c){this.setBgSize(a,b,c);this.width=a;this.height=b;for(var e in this.layers)this.layers[e].setSize(a,
b,c);h.width=a;h.height=b};h.setBgSize=function(a,b,c){var e=this.getChildByName("bg");null!=e&&e.graphics.clear().beginStroke("#ccc").beginFill(c).drawRect(0,0,a,b)};h.setHiSize=function(a,b,c){var e=this.getChildByName("hi");null!=e&&e.graphics.clear().beginFill(c).drawRect(0,0,a,b)};h.getWidth=function(){window.WBdraw.trace("get width");return width};h.wbRegister=function(a,b){};h.clear=function(a,b){};h.wbSwitch=function(a){};h.unshift=function(a){};h.push=function(a){};h.handleClick=function(a){console.log("click1")};
h.menubuttons=function(b,c){null==c&&(c="EN");options=b[c];stot=options.length;var f=this.hostWL=null,h=null,h=this.oInvoke,h=new WBdraw.Button("up","up.png","back to menu","up","#999",a);this.menucontain.addChild(h);for(var f=h,l=0;l<stot;++l){var m=options[l];this.subscriberWL[m.name]&&(h=void 0==m.btns[">"]?g:h=e,h=new WBdraw.Button(m.name,m.btns.icon,m.btns.hint,m.name,"#"+Math.floor(16777215*Math.random()).toString(16),h),null!=f?(h.x=0,h.y=f.y+f.height+10):h.x=h.y=0,h.alpha=.5,this.menucontain.addChild(h,
null==f?!0:!1),f=h)}window.WBdraw.trace("________done...");f=this.menucontain.getSize();console.log(f);createjs.Tween.get(this).wait(1).wait(300).call(this.setBgSize,[f.x,f.y,"#DDD"],this)};l.Menu=createjs.promote(f,"Container")})(window.WBdraw);(function(l){function f(a,b,c,f){this.Container_constructor();this.id=this.name=a;this.color=f;this.label=b;this.text=new createjs.Text("tools","20px Arial","#000");this.setup();this.currentMenu=""}var c=createjs.extend(f,createjs.Container);c.requestedMenu=function(a){this.currentMenu=a};c.addChild=function(a){console.log(a.id);this.Container_addChild(a);this.setSize(a.x+a.width,a.y+a.height,"#"+Math.floor(16777215*Math.random()).toString(16));a=this.children;for(var b in a)"btn"==a[b].type&&(a[b].x=
.5*Math.abs(this.width-a[b].width))};c.width=function(a){console.log("@@!!!!@@@  "+this.getWidth());this.Container_width(a)};c.removeAllBtns=function(){for(var a=this.children.length,b=0;b<a;++b)console.log(this.children[b]),"btn"==this.children[b].type&&(this.removeChild(this.children[b]),--a,--b)};c.setup=function(){var a=new createjs.Shape;a.name=a.id="bg";a.alpha=.5;this.addChild(a);this.offset=10*Math.random();this.count=0};c.width=0;c.height=0;c.setSize=function(a,b,c,f){var h=this.getChildByName("bg");
if(null==h)throw Error("FAILED to load bg in wbMenuBar");h.graphics.clear().beginStroke("#ccc").beginFill(c).drawRect(0,0,a,b);this.width=a;this.height=b;if(f)for(c=this.children.length,f=0;f<c;++f)"btn"==this.children[f].type&&(this.children[f].width=a),this.children[f].height=b};c.getWidth=function(){return width};c.getSize=function(){return new createjs.Point(this.width,this.height)};c.endDraw=function(a){a=a.target;var b;a=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1);for(var c=0;c<a.length;c++)if(a[c].parent.scaled){b=
a[c].parent;break}console.log(b.scaled);null!=b&&(b.scaled=!1,createjs.Tween.get(b,{override:!0}).to({scaleX:1,scaleY:1},100,createjs.Ease.quadIn))};l.MenuBar=createjs.promote(f,"Container")})(window.WBdraw);(function(l){function f(c,a,b){this.initialize(c,a,b)}f.PLATFORM_DESKTOP="desktop";f.PLATFORM_WP7="wp7";f.PLATFORM_WP8="wp8";f.PLATFORM_IPHONE="iPhone";f.PLATFORM_IPHONE3="iPhone3";f.PLATFORM_IPHONE_PINNED="iPhonePinned";f.PLATFORM_IPHONE3_PINNED="iPhone3Pinned";f.QUALITY_NORMAL=0;f.QUALITY_HIGH=1;f.QUALITY_LOW=2;f.prototype={touchEnabled:!1,isIOS:!1,width:1024,height:622,scaleFactor:1,platform:null,quality:f.QUALITY_NORMAL,initialize:function(c,a,b){null!=a&&(this.width=a);null!=b&&(this.height=
b);this.platform=c;switch(c){case f.PLATFORM_DESKTOP:this.width=1024;this.height=622;break;case f.PLATFORM_WP7:this.width=800;this.height=410;this.scaleFactor=.6;this.quality=f.QUALITY_LOW;break;case f.PLATFORM_WP8:this.width=1280;this.height=700;this.scaleFactor=.6;this.quality=f.QUALITY_HIGH;break;case f.PLATFORM_IPHONE:this.width=960,this.height=640,this.scaleFactor=.5,this.quality=f.QUALITY_HIGH}},toString:function(){return"[Config.ConfigWB]"}};l.ConfigWB=f})(window.WBdraw);
//# sourceMappingURL=final.map
