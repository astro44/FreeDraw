(function(k){var g={browser:null,version:null,os:null,isIE:function(){return"Explorer"==g.browser},isVista:function(){return-1!=navigator.userAgent.indexOf("Windows NT 6.0")},isXP:function(){return-1!=navigator.userAgent.indexOf("Windows NT 5")},isWindows:function(){return"Windows"==g.os},isWP8:function(){return-1!=navigator.userAgent.indexOf("Windows Phone 8")},isWP7:function(){return-1!=navigator.userAgent.indexOf("Windows Phone 7")},isAndroid:function(){return-1!=navigator.userAgent.indexOf("Android")},
isIE9:function(){return this.isIE()&&9==this.getInternetExplorerVersion()},isMac:function(){return"Mac"==g.os||g.isIOS()},isIOS:function(){return"iPhone/iPod"==g.os||"iPad"==g.os},isIOSRetina:function(){return g.isIOS()&&1<window.devicePixelRatio},isMobileSafari:function(){return g.isSafari()&&g.isIOS()},isSafari:function(){return"Safari"==g.browser},isChrome:function(){return"Chrome"==g.browser},isFirefox:function(){return"Firefox"==g.browser||"Mozilla"==g.browser},isOpera:function(){return"Opera"==
g.browser},getInternetExplorerVersion:function(){var c=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(c=parseFloat(RegExp.$1));return c}};g._dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",
versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},
{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}];g._dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];g._versionSearchString=null;g.init=function(){g.browser=g._searchString(g._dataBrowser)||
"An unknown browser";g.version=g._searchVersion(navigator.userAgent)||g._searchVersion(navigator.appVersion)||"An unknown version";g.os=g._searchString(g._dataOS)||"An unknown OS"};g._searchString=function(c){for(var a=0,b=c.length;a<b;a++){var e=c[a].string,f=c[a].prop;g._versionSearchString=c[a].versionSearch||c[a].identity;if(e){if(-1!=e.indexOf(c[a].subString))return c[a].identity}else if(f)return c[a].identity}};g._searchVersion=function(c){var a=c.indexOf(g._versionSearchString);if(-1!=a)return parseFloat(c.substring(a+
g._versionSearchString.length+1))};k.BrowserDetect=g;g.init()})(null!=window.Main?window.Main:window);(function(k){function g(a,b,e,f,c,n){this.Container_constructor();this.method=n;this.color=c;this.label=f;this.name=this.id=a;this.hint=e;this.icon=b;this.type="btn";this.height=this.width=0;this.setup()}var c=createjs.extend(g,createjs.Container);c.setup=function(){var a=window.WBdraw.luma(this.color),b=window.WBdraw.getContrast50(this.color);console.log(a);130>a&&(b="#FFF");a=new createjs.Text(this.label,"20px Arial",b);a.textBaseline="top";a.textAlign="center";this.width=a.getMeasuredWidth()+30;
this.height=a.getMeasuredHeight()+20;a.x=this.width/2;a.y=10;b=new createjs.Shape;b.graphics.beginFill(this.color).drawRoundRect(0,0,this.width,this.height,10);this.addChild(b,a);this.on("click",this.handleClick);this.on("rollover",this.handleRollOver);this.on("rollout",this.handleRollOver);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};c.handleClick=function(a){this.method(this,this.id)};c.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};k.Button=
createjs.promote(g,"Container")})(window.WBdraw);var BUILD="debug";
(function(k){function g(){}function c(a){a=mainStage.getChildByName("BASE_main");if(a.width!=mainStage.canvas.width||a.height!=mainStage.canvas.height)if(a.setSize(mainStage.canvas.width,mainStage.canvas.height,"#CCC"),console.log("abc tick  width:"+a.width+"  widthCvs:"+mainStage.canvas.width+"  height:"+a.height+"  heightCvs:"+mainStage.canvas.height),a=mainStage.canvas,void 0!=a){var b=mainStage.getChildByName("BASE_main"),b=new window.WBdraw.ConfigWB(BrowserDetect.os,b.width,b.height);window.WBdraw.trace(b.width+
", "+b.height+", "+b.scaleFactor);a.width=b.width;a.height=b.height;a.style.width=b.width*b.scaleFactor+"px";a.style.height=b.height*b.scaleFactor+"px"}mainStage.update()}g.main=function(){(new g).initialize()};g.prototype.initialize=function(){this.mainCanvas=document.getElementById("mainCanvas");this.mainCanvas.setStrokeStyle="#FF0000";this.mainStage=new createjs.Stage(this.mainCanvas);this.mainStage.snapToPixelsEnabled=!0;this.mainStage.id="mainIn";window.mainStage=this.mainStage;this.mainStage.enableMouseOver(10);
createjs.Ticker.addEventListener("tick",this.mainStage);createjs.Ticker.timingMode=createjs.Ticker.RAF;createjs.Ticker.setFPS(30);createjs.Ticker.on("tick",c);createjs.Touch.enable(this.mainStage);this.mainStage.enableMouseOver();window.WBdraw.trace("main...start");window.WBdraw.trace(BrowserDetect.browser);window.WBdraw.trace(BrowserDetect.version);window.WBdraw.trace(BrowserDetect.os);var a=new WBdraw.WBoard("BASE_main","#ccc");WBdraw.currentBoard=a;this.mainStage.addChild(a)};k.Main=g})(window);this.ndgmr=this.ndgmr||{};
(function(k){var g=document.createElement("canvas"),c=g.getContext("2d");c.save();var a=document.createElement("canvas"),b=a.getContext("2d");b.save();var e=[],f=function(a,b){var e,f;e=l(a);f=l(b);return m(e,f)};ndgmr.checkRectCollision=f;ndgmr.checkPixelCollision=function(e,p,n,l){if(ndgmr.DEBUG||ndgmr.DEBUG_COLLISION)document.body.appendChild(g),document.body.appendChild(a);l=l||!1;intersection=f(e,p);if(!intersection)return!1;n=Math.min(.99999,n||0);g.width=intersection.width;g.height=intersection.height;
a.width=intersection.width;a.height=intersection.height;e=h(intersection,e,c,1);a:{p=h(intersection,p,b,2);var m=intersection.width,w=intersection.height,k,A,u,x,y=3,q={x:Infinity,y:Infinity,x2:-Infinity,y2:-Infinity};for(x=0;x<w;++x)for(u=0;u<m;++u){k=e.length>y+1?e[y]/255:0;A=p.length>y+1?p[y]/255:0;if(k>n&&A>n)if(l)u<q.x&&(q.x=u),u>q.x2&&(q.x2=u),x<q.y&&(q.y=x),x>q.y2&&(q.y2=x);else{e={x:u,y:x,width:1,height:1};break a}y+=4}Infinity!=q.x?(q.width=q.x2-q.x+1,q.height=q.y2-q.y+1,e=q):e=null}if(e)e.x+=
intersection.x,e.x2+=intersection.x,e.y+=intersection.y,e.y2+=intersection.y;else return!1;return e};var h=function(a,b,f,c){var h,g,l;b instanceof createjs.Bitmap?g=b.image:b instanceof createjs.Sprite&&(frame=b.spriteSheet.getFrame(b.currentFrame),h=frame.image.src+":"+frame.rect.x+":"+frame.rect.y+":"+frame.rect.width+":"+frame.rect.height,e[h]?g=e[h]:e[h]=g=createjs.SpriteSheetUtils.extractFrame(b.spriteSheet,b.currentFrame));h=b.globalToLocal(a.x,a.y);f.restore();f.save();f.rotate(n(b,"rotation")*
(Math.PI/180));f.scale(n(b,"scaleX","*"),n(b,"scaleY","*"));f.translate(-h.x-a["rect"+c].regX,-h.y-a["rect"+c].regY);void 0!=(l=b.sourceRect)?f.drawImage(g,l.x,l.y,l.width,l.height,0,0,l.width,l.height):f.drawImage(g,0,0,g.width,g.height);return f.getImageData(0,0,a.width,a.height).data},n=function(a,b,e){e=e||"+";if(a.parent&&a.parent[b]){var f=a[b];a=n(a.parent,b,e);return"*"==e?f*a:f+a}return a[b]},m=function(a,b){var e,f,c,h,n,g,l,m;e=a.x+(c=a.width/2);f=a.y+(h=a.height/2);n=b.x+(g=b.width/2);
l=b.y+(m=b.height/2);e=Math.abs(e-n)-(c+g);f=Math.abs(f-l)-(h+m);return 0>e&&0>f?(e=Math.min(Math.min(a.width,b.width),-e),f=Math.min(Math.min(a.height,b.height),-f),{x:Math.max(a.x,b.x),y:Math.max(a.y,b.y),width:e,height:f,rect1:a,rect2:b}):null};ndgmr.calculateIntersection=m;var l=function(a){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;a=a.children;var e=a.length,f,c;for(c=0;c<e;c++)f=l(a[c]),f.x<b.x&&(b.x=f.x),f.y<b.y&&(b.y=f.y),
f.x+f.width>b.x2&&(b.x2=f.x+f.width),f.y+f.height>b.y2&&(b.y2=f.y+f.height);Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{var h,n,g;a instanceof createjs.Bitmap?(f=a.sourceRect||a.image,h=f.width,n=f.height):a instanceof createjs.Sprite?a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image?(f=a.spriteSheet.getFrame(a.currentFrame),h=
f.rect.width,n=f.rect.height,e=f.regX,g=f.regY):(b.x=a.x||0,b.y=a.y||0):(b.x=a.x||0,b.y=a.y||0);e=e||0;h=h||0;g=g||0;n=n||0;b.regX=e;b.regY=g;f=a.localToGlobal(0-e,0-g);c=a.localToGlobal(h-e,n-g);h=a.localToGlobal(h-e,0-g);a=a.localToGlobal(0-e,n-g);b.x=Math.min(Math.min(Math.min(f.x,c.x),h.x),a.x);b.y=Math.min(Math.min(Math.min(f.y,c.y),h.y),a.y);b.width=Math.max(Math.max(Math.max(f.x,c.x),h.x),a.x)-b.x;b.height=Math.max(Math.max(Math.max(f.y,c.y),h.y),a.y)-b.y}return b};ndgmr.getBounds=l})(window.Main);(function(k){function g(a,b,e){this.Container_constructor();this.method=e;this.color=b;this.name=this.id=a;this.type="btn";this.height=this.width=0;this.setup()}var c=createjs.extend(g,createjs.Container);c.setup=function(){this.height=this.width=30;var a=new createjs.Shape;a.graphics.beginStroke("#000");a.graphics.beginFill(this.color).drawCircle(0,0,10);this.addChild(a);this.on("click",this.handleClick);this.on("rollover",this.handleRollOver);this.on("rollout",this.handleRollOver);this.cursor="pointer";
this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};c.handleClick=function(a){this.method(this,this.id)};c.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};k.resizeBtn=createjs.promote(g,"Container")})(window.WBdraw);(function(k){function g(a,b){this.Container_constructor();this.id=this.name=a;this.color=b;this.layers={};this._tempModel=this._sandboxRect=this._isConnector=this._undoRange=this._objectInit=this.shapeNOW=this._currentdeckIndex=this.controller=null;this.setup()}function c(a){window.WBdraw.trace(this.resizer);window.WBdraw.trace("=========onSelect-=22222=======");this.resizer.handleRollOver(a);this.resizer.wrapTarget(this.resizer,a.param)}function a(a){window.WBdraw.trace("=========commited-========");
window.WBdraw.trace(a)}var b=createjs.extend(g,createjs.Container);b.getLayer=function(a){return this.layers[a]};b.drawinit=function(a,b,c,n){a._objectInit=!1;a._tempModel={classIn:b,type:c,path:n}};b.shapeTweenUpdate=function(a,b){b.alpha=.5;createjs.Tween.get(owner.form,{override:!0}).to({x:b.x,y:b.y,alpha:1},300,createjs.Ease.quadIn)};b.menuEventProxy=function(a){this.drawinit(this,a.param[0],a.param[1])};b.shapeStart=function(){null!=this.shapeNOW&&(console.log("...found shape in use..."),this.shapeNOW._commited||
this.shapeNOW.drawPerm(this.shapeNOW,!1));var b=this.layers.cvsMAIN,f=this._tempModel.type;switch(this._tempModel.type){case "select":break;case "ungroup":break;default:this._objectInit||(window.WBdraw.trace(" Form"+window.WBdraw.toTitleCase(this._tempModel.classIn)),f=new (WBdraw["Form"+window.WBdraw.toTitleCase(this._tempModel.classIn)])("rcolvi_"+f,f),f.x=mainStage.mouseX,f.y=mainStage.mouseY,b.addChild(f),this.shapeNOW=f,f.addEventListener("SelectEvent",c.bind(this)),f.addEventListener("CommitEvent",
a.bind(this)))}};b.drawing=function(a,b){0==this._objectInit&&this.shapeNOW.drawTemp(a,b)};b.drawdone=function(a){window.WBdraw.trace("...done nwo",b);a.shapeNOW.drawPerm(a.shapeNOW,!1);a.shapeNOW=null};b.clearObject=function(){this.shapeNOW=null};b.setup=function(){var a=new createjs.Shape;a.alpha=1;a.name=a.id="bg";var b=new WBdraw.Box("cvsDECK","#ccc",!0),c=new WBdraw.Box("cvsMAIN","#ccc",!0),n=new WBdraw.Box("cvsSAND","#ccc",!0);this.layers[b.id]=b;this.layers[c.id]=c;this.layers[n.id]=n;this.resizer=
new WBdraw.FormResize("rsize","rtool");this.resizer.x=200;this.resizer.y=20;this.addChild(a,b,c,n,this.resizer);this.menu=new WBdraw.Menu("m1",this);this.menu.addEventListener("MenuEvent",this.menuEventProxy.bind(this));this.addChild(this.menu);this.on("click",this.handleClick);this.on("mousedown",this.handlePress);this.on("pressup",this.handleRelease);this.offset=10*Math.random();this.count=0;this.test_draw("line","free")};b.width=0;b.height=0;b.setSize=function(a,f,c){var n=this.getChildByName("bg");
console.log("resizeBy");n.graphics.clear().beginStroke("#ccc").beginFill(c).drawRect(0,0,a,f);for(var g in this.layers)this.layers[g].setSize(a,f,c);b.width=a;b.height=f};b.getWidth=function(){console.log("get width");return width};b.wbRegister=function(a,b){};b.clear=function(a,b){};b.wbSwitch=function(a){};b.unshift=function(a){};b.push=function(a){};b.handleClick=function(a){window.WBdraw.trace("click1")};b.handlePress=function(a){console.log("pressing.33gfw...");this.shapeStart();this.on("pressmove",
this.drawLine);a.stopImmediatePropagation()};b.handleRelease=function(a){this.drawdone(this);this.off("pressmove",this.drawLine)};b.drawLine=function(a){this.drawing(mainStage.mouseX,mainStage.mouseY)};b.endDraw=function(a){window.WBdraw.trace("enddraw1");this.off("pressmove",this.drawLine)};b.test_draw=function(a,b){window.WBdraw.trace("enddraw1");this.drawinit(this,a,b)};createjs.EventDispatcher.initialize(g.prototype);k.WBoard=createjs.promote(g,"Container")})(window.WBdraw);(function(k){function g(a,b,e){this.Container_constructor();this.id=this.name=a;this.transparent=e;this.color=b;this.setup()}var c=createjs.extend(g,createjs.Container);c.setup=function(){var a=new createjs.Shape;a.alpha=1;a.name=a.id="bg";this.on("click",this.handleClick);this.on("mousedown",this.handlePress);this.on("pressup",this.handleRelease);this.on("pressmove",this.drawLine);console.log("box1");this.offset=10*Math.random();this.count=0};c.width=0;c.height=0;c.setSize=function(a,b,e){c.width=
a;c.height=b;if(!this.transparent){var f=this.getChildByName("bg");console.log("resizerrrBy");f.graphics.clear().beginStroke("#ccc").beginFill(e).drawRect(0,0,a,b)}};c.getWidth=function(){console.log("get width");return width};c.handleClick=function(a){console.log("click");a.stopImmediatePropagation()};c.handlePress=function(a){console.log(a);console.log("press")};c.handleRelease=function(a){console.log("release");a.stopImmediatePropagation()};c.drawLine=function(a){console.log("draw");a.stopImmediatePropagation()};
c.endDraw=function(a){console.log("enddraw");a.stopImmediatePropagation()};k.Box=createjs.promote(g,"Container")})(window.WBdraw);(function(k){function g(a,b){this.Container_constructor();this.id=this.name=a;this.color="";this.type=b;this.limitDraw=!1;this.rect=null;this.segSize=12;this.regY=this.regX=0;this.scaled=!1;this.rel=null;this.setup()}createjs.EventDispatcher.initialize(g.prototype);var c=createjs.extend(g,createjs.Container);c.setup=function(){this.points=[];this.bg=new createjs.Shape;this.hitHelper=new createjs.Shape;this.bg.hitArea=this.hitHelper;this.addChild(this.bg);this.on("mousedown",this.handlePress);this.on("pressup",
this.handleRelease);this.on("pressmove",this.moveLocally);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};c.drawTemp=function(a,b){c[this.type](this,a,b)};c.drawPerm=function(a,b){if(a.id==this.id){try{var e=c[this.type+"Perm"](this,a,b)}catch(f){throw console.log(f),"[E] No function matches:"+this.type+"Perm() in FormLine (wbFormLine.js)";}var h={type:"CommitEvent",param:this};e&&this.dispatchEvent(h)}};c.width=0;c.height=0;c.setSize=function(a,b,e){};c.getWidth=
function(){return width};c.moveLocally=function(a){this.x=a.stageX-this.rel.x+this.regX;this.y=a.stageY-this.rel.y+this.regY;update=!0;a.stopImmediatePropagation()};c.moveSTART=function(a){a.stopImmediatePropagation();a=a.target;for(var b,e=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1),f=0;f<e.length;f++)if(e[f].parent.scaled){b=e[f].parent;break}null!=b&&(b.x=a.mouseX-b.rel.x+b.regX,b.y=a.mouseY-b.rel.y+b.regY,console.log(b.rel+","+b.regX))};c.moveEND=function(a){a=a.target;var b;a=a.getObjectsUnderPoint(a.mouseX,
a.mouseY,1);for(var e=0;e<a.length;e++)if(a[e].parent.scaled){b=a[e].parent;break}null!=b&&(b.scaled=!1,createjs.Tween.get(b,{override:!0}).to({scaleX:1,scaleY:1},100,createjs.Ease.quadIn))};c.handlePress=function(a){mainStage.addEventListener("stagemousemove",this.moveSTART);mainStage.addEventListener("stagemouseup",this.moveEND);this.scaled||(createjs.Tween.get(this,{override:!0}).to({scaleX:1.05,scaleY:1.05},100,createjs.Ease.quadIn),this.scaled=!0,this.rel=this.globalToLocal(mainStage.mouseX,
mainStage.mouseY),a.stopImmediatePropagation())};c.handleRelease=function(a){mainStage.removeEventListener("stagemousemove",this.moveSTART);mainStage.removeEventListener("stagemouseup",this.moveEND);a.stopImmediatePropagation();this.dispatchEvent({type:"SelectEvent",param:this})};c.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};c.square=function(a,b,e){b=a.bg.globalToLocal(b,e);e=a.bg.graphics;e.clear();a.points=[];e.setStrokeStyle(5);e.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));
e.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));e.rect(0,0,b.x,b.y);a.points.push(b);e.endStroke();e.endFill()};c.squarePerm=function(a,b,e){b=a.bg.graphics;e=a.bg.hitArea.graphics;b.clear();e.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;lc=a.points[0];b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));b.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));
e.setStrokeStyle(10);e.beginStroke("#000");e.beginFill("red");e.rect(0,0,lc.x,lc.y);b.rect(0,0,lc.x,lc.y);b.endStroke();e.endStroke();e.endFill();b.endFill();return!0};c.circle=function(a,b,e){b=a.bg.globalToLocal(b,e);e=a.bg.graphics;e.clear();a.points=[];e.setStrokeStyle(5);e.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));e.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));e.drawEllipse(0,0,b.x,b.y);a.points.push(b);e.endStroke();e.endFill()};c.circlePerm=function(a,
b,e){b=a.bg.graphics;e=a.bg.hitArea.graphics;b.clear();e.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;lc=a.points[0];b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));b.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));e.setStrokeStyle(10);e.beginStroke("#000");e.beginFill("red");e.drawEllipse(0,0,lc.x,lc.y);b.drawEllipse(0,0,lc.x,lc.y);b.endStroke();e.endStroke();
e.endFill();b.endFill();return!0};c.star=function(a,b,e){a.bg.globalToLocal(b,e);var f={},c=a.bg.graphics;c.clear();a.points=[];c.setStrokeStyle(5);c.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));c.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));console.log("---=-=-=--=-=-=-=-=>>>>");f.radius=b/mainStage.canvas.width*200;f.pointy=e/mainStage.canvas.height*.9;f.points=5;c.drawPolyStar(0,0,f.radius,f.points,f.pointy,-90);a.points.push(f);c.endStroke();c.endFill()};
c.starPerm=function(a,b,e){b=a.bg.graphics;e=a.bg.hitArea.graphics;b.clear();e.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;sPos=a.points[0];b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));b.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));e.setStrokeStyle(10);e.beginStroke("#000");e.beginFill("red");e.drawPolyStar(0,0,sPos.radius,sPos.points,sPos.pointy,
-90);b.drawPolyStar(0,0,sPos.radius,sPos.points,sPos.pointy,-90);b.endStroke();e.endStroke();e.endFill();b.endFill();return!0};k.FormFill=createjs.promote(g,"Container")})(window.WBdraw);(function(k){function g(a,b){this.Container_constructor();this.id=this.name=a;this.color="";this.type=b;this.limitDraw=!1;this.rect=null;this.segSize=12;this.regY=this.regX=0;this.scaled=!1;this.rel=null;this.setup()}createjs.EventDispatcher.initialize(g.prototype);var c=createjs.extend(g,createjs.Container);c.setup=function(){this.points=[];this.bg=new createjs.Shape;this.hitHelper=new createjs.Shape;this.bg.hitArea=this.hitHelper;this.addChild(this.bg);this.on("mousedown",this.handlePress);this.on("pressup",
this.handleRelease);this.on("pressmove",this.moveLocally);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};c.drawTemp=function(a,b){c[this.type](this,a,b)};c.drawPerm=function(a,b){if(a.id==this.id){try{var e=c[this.type+"Perm"](this,a,b)}catch(f){throw console.log(f),"[E] No function matches:"+this.type+"Perm() in FormLine (wbFormLine.js)";}var h={type:"CommitEvent",param:this};e&&this.dispatchEvent(h)}};c.width=0;c.height=0;c.setSize=function(a,b,e){};c.getWidth=
function(){return width};c.moveLocally=function(a){this.x=a.stageX-this.rel.x+this.regX;this.y=a.stageY-this.rel.y+this.regY;update=!0;a.stopImmediatePropagation()};c.moveSTART=function(a){a.stopImmediatePropagation();a=a.target;for(var b,e=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1),f=0;f<e.length;f++)if(e[f].parent.scaled){b=e[f].parent;break}null!=b&&(b.x=a.mouseX-b.rel.x+b.regX,b.y=a.mouseY-b.rel.y+b.regY,console.log(b.rel+","+b.regX))};c.moveEND=function(a){a=a.target;var b;a=a.getObjectsUnderPoint(a.mouseX,
a.mouseY,1);for(var e=0;e<a.length;e++)if(a[e].parent.scaled){b=a[e].parent;break}null!=b&&(b.scaled=!1,createjs.Tween.get(b,{override:!0}).to({scaleX:1,scaleY:1},100,createjs.Ease.quadIn))};c.handlePress=function(a){mainStage.addEventListener("stagemousemove",this.moveSTART);mainStage.addEventListener("stagemouseup",this.moveEND);this.scaled||(createjs.Tween.get(this,{override:!0}).to({scaleX:1.05,scaleY:1.05},100,createjs.Ease.quadIn),this.scaled=!0,this.rel=this.globalToLocal(mainStage.mouseX,
mainStage.mouseY),a.stopImmediatePropagation())};c.handleRelease=function(a){mainStage.removeEventListener("stagemousemove",this.moveSTART);mainStage.removeEventListener("stagemouseup",this.moveEND);a.stopImmediatePropagation();this.dispatchEvent({type:"SelectEvent",param:this})};c.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};c.straight=function(a,b,e){b=a.bg.globalToLocal(b,e);e=a.bg.graphics;e.clear();a.points=[];e.setStrokeStyle(5);d=Math.sqrt(b.x*b.x+b.y*b.y);r=d%a.segSize;tot=
d/a.segSize;for(var f=0,c=0,g=0;g<tot;++g){var m=g/tot*b.x,l=g/tot*b.y;e.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));e.moveTo(f,c);e.lineTo(m,l);f=m;c=l}e.moveTo(f,c);e.lineTo(b.x,b.y);a.points.push(b);e.endStroke()};c.straightPerm=function(a,b,e){b=a.bg.graphics;e=a.bg.hitArea.graphics;b.clear();e.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;lc=a.points[0];b.setStrokeStyle(5);b.beginStroke("#"+
Math.floor(16777215*Math.random()).toString(16));e.setStrokeStyle(10);e.beginStroke("#000");e.beginFill("red");e.moveTo(0,0);b.moveTo(0,0);b.lineTo(lc.x,lc.y);e.lineTo(lc.x,lc.y);b.endStroke();e.endStroke();e.endFill();a.setDimension(a,lc.x,lc.y);return!0};c.free=function(a,b,e){var f=a.bg.graphics,c=a.points[a.points.length-1],g=0;b=a.bg.globalToLocal(b,e);f.setStrokeStyle(5);f.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));void 0==c&&(c=new createjs.Point(0,0));g=b.y;e=c.x;var m=
c.y,g=Math.sqrt((e-=b.x)*e+(m-=g)*m);g>a.segSize&&(f.moveTo(c.x,c.y),f.lineTo(b.x,b.y),f.endStroke(),a.points.push(b))};c.freePerm=function(a,b,e){b=a.bg.graphics;e=a.bg.hitArea.graphics;console.log(a);var f=a.points.length;if(0==f)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;new createjs.Point(0,0);b.clear();b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));e.setStrokeStyle(10);e.beginStroke("#000");
e.beginFill("red");e.moveTo(0,0);b.moveTo(0,0);for(var c=0,g=0,m=0,l=0,v=0;v<f;++v){var p=a.points[v];b.lineTo(p.x,p.y);e.lineTo(p.x,p.y);p.x>g&&(g=p.x);p.y>c&&(c=p.y);p.x<m&&(m=p.x);p.y<l&&(l=p.y)}a.bg.x=0>m?Math.abs(m):0;a.bg.y=0<l?Math.abs(l):0;b.endStroke();e.endStroke();e.endFill();a.x-=a.bg.x;a.y+=a.bg.y;a.rect=new createjs.Rectangle(0,0,g,c);a.regX=.5*g;a.regY=.5*c;a.x+=a.regX;a.y+=a.regY;a.setDimension(a,a.rect.width,a.rect.height);return!0};c.bezier=function(a,b,e){var f={x:0,y:0},c=a.bg.graphics;
e=a.bg.globalToLocal(b,e);c.clear();a.points=[];c.setStrokeStyle(5);b=Math.round(e.x);e=Math.round(e.y);f.fx=b;f.cx=f.fx;f.fy=e;f.cy=f.y;c.setStrokeStyle(1);c.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));c.moveTo(f.fx,f.fy);c.lineTo(f.cx,f.cy);c.lineTo(f.x,f.y);c.setStrokeStyle(5);c.bezierCurveTo(f.fx,f.fy,f.cx,f.cy,f.x,f.y);a.points.push(f);c.endStroke()};c.bezierPerm=function(a,b,e){var f=a.points.length;b=a.bg.graphics;e=a.bg.hitArea.graphics;b.clear();e.clear();if(0==f)return b=
a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;f=a.points[0];e.setStrokeStyle(25);e.beginStroke("#000");b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));b.bezierCurveTo(f.fx,f.fy,f.cx,f.cy,f.x,f.y);e.bezierCurveTo(f.fx,f.fy,f.cx,f.cy,f.x,f.y);b.endStroke();e.endStroke();a.setDimension(a,f.cx,f.fy);return!0};c.connector=function(a,b,e){};c.connectorPerm=function(a,b,e){};c.connectorFollowEdge=function(a,b,
e){point=new createjs.Point(b.x+.5*b.width,b.y+.5*b.height);target=new createjs.Point(e.x+.5*e.width,e.y+.5*e.height);b=point.x-target.x;var f=point.y-target.y;a=f;b>f&&(a=b);b=Math.atan2(target.Y-point.Y,target.X-point.X);for(var f=canvas.getContext("2d"),c=0;c<a;++c){var g=2*Math.sin(b),m=2*Math.cos(b),g=new createjs.Point(e.x+m,e.y+g),g=f.getImageData(g.x,g.y,2,2).data,g="rgba("+g[pos]+","+g[pos+1]+","+g[pos+2]+","+g[pos+3]+")";"#CCCCCC"==g&&console.log("pixel found::"+g);console.log(" found::"+
g)}};c.setDimension=function(a,b,e){a.width=Math.abs(b);a.height=Math.abs(e);console.log(a.width+"x"+a.height)};k.FormLine=createjs.promote(g,"Container")})(window.WBdraw);(function(k){function g(a,b){this.Container_constructor();this.id=this.name=a;this.color="";this.type=b;this.limitDraw=!1;this.rect=null;this.segSize=12;this.regY=this.regX=0;this.scaled=!1;this.boxr=this.box4=this.box3=this.box2=this.box1=this.formTarget=this.rel=null;this.setup()}function c(a,b){return""}function a(a,b,c){var g=c.x,m=b.y;c=c.y;d=Math.sqrt((g-=b.x)*g+(c-=m)*c);console.log("d=="+d);tot=d/12;g=b.x;m=b.y;for(c=0;c<tot;++c){var l=c/tot*b.x,v=c/tot*b.y;a.moveTo(g,m);a.lineTo(l,v);g=l;
m=v}}createjs.EventDispatcher.initialize(g.prototype);var b=createjs.extend(g,createjs.Container);b.setup=function(){this.points=[];this.bg=new createjs.Shape;this.box1=new WBdraw.resizeBtn("bx1","#FFF",c);this.box2=new WBdraw.resizeBtn("bx2","#FFF",c);this.box3=new WBdraw.resizeBtn("bx3","#FFF",c);this.box4=new WBdraw.resizeBtn("bx4","#FFF",c);this.boxr=new WBdraw.resizeBtn("bxr","#FFF",c);this.addChild(this.bg,this.box1,this.box2,this.box3,this.box4,this.boxr);this.offset=10*Math.random();this.count=
0};b.width=0;b.height=0;b.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};b.wrapTarget=function(b,f){console.log("----------------\x3e>resizer");console.log(f);b.target=f;console.log(f.width+",X"+f.height+",   x:"+f.x+",Y:"+f.y);b.x=f.x;b.y=f.y;b.box1=b.box3.x=0;b.box1=b.box2.y=0;b.box2.x=f.width;b.box3.y=f.height;b.box4.x=f.width;b.box4.y=f.height;b.boxr.x=.5*f.width;b.boxr.y=-60;var c=this.bg.graphics;c.beginStroke("red");c.setStrokeStyle(2);var g=new createjs.Point(0,0),m=new createjs.Point(.5*
f.width,0),l=new createjs.Point(f.width,0),v=new createjs.Point(f.width,f.height),p=new createjs.Point(0,f.height),k=new createjs.Point(f.width,f.height),t=new createjs.Point(.5*f.width,-60);a(c,g,l);a(c,g,p);a(c,p,v);a(c,l,k);a(c,m,t)};b.straight=function(a,b,c){b=a.bg.globalToLocal(b,c);c=a.bg.graphics;c.clear();a.points=[];c.setStrokeStyle(5);d=Math.sqrt(b.x*b.x+b.y*b.y);r=d%a.segSize;tot=d/a.segSize;for(var g=0,m=0,l=0;l<tot;++l){var v=l/tot*b.x,p=l/tot*b.y;c.beginStroke("#"+Math.floor(16777215*
Math.random()).toString(16));c.moveTo(g,m);c.lineTo(v,p);g=v;m=p}c.moveTo(g,m);c.lineTo(b.x,b.y);a.points.push(b);c.endStroke()};b.straightPerm=function(a,b,c){b=a.bg.graphics;c=a.bg.hitArea.graphics;b.clear();c.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;lc=a.points[0];b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));c.setStrokeStyle(10);c.beginStroke("#000");c.beginFill("red");
c.moveTo(0,0);b.moveTo(0,0);b.lineTo(lc.x,lc.y);c.lineTo(lc.x,lc.y);b.endStroke();c.endStroke();c.endFill();return!0};k.FormResize=createjs.promote(g,"Container")})(window.WBdraw);(function(k){function g(a,b,c,f){this.Container_constructor();this.id=this.name=a;this.color=f;this.type=c;this.label=b;this.setup()}var c=createjs.extend(g,createjs.Container);c.setup=function(){var a=new createjs.Text(this.label,"20px Arial","#000");a.name=a.id="txt";a.textBaseline="top";a.textAlign="center";var b=a.getMeasuredWidth()+30,c=a.getMeasuredHeight()+20;a.x=b/2;a.y=10;var f=new createjs.Shape;f.name=f.id="bg";f.graphics.setStrokeStyle(5);f.graphics.beginStroke("#"+Math.floor(16777215*
Math.random()).toString(16));f.graphics.beginFill(this.color).drawRoundRect(0,0,b,c,10);this.addChild(f,a);this.on("click",this.handleClick);this.on("rollover",this.handleRollOver);this.on("rollout",this.handleRollOver);this.on("mousedown",this.handlePress);this.on("pressup",this.handleRelease);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};c.handleClick=function(a){};c.hello=function(a){console.log(a);c.width=100};c.width=0;c.height=0;c.setSize=function(a,
b,e){target.getChildByName("bg").graphics.clear().beginStroke("#ccc").beginFill("#"+Math.floor(16777215*Math.random())).drawRect(0,0,a,b);c.width=a;c.height=b};c.getWidth=function(){return width};c.handlePress=function(a){mainStage.addEventListener("stagemousemove",this.drawLine);mainStage.addEventListener("stagemouseup",this.endDraw);console.log(this.id);this.scaled||(createjs.Tween.get(this,{override:!0}).to({scaleX:1.1,scaleY:1.1},100,createjs.Ease.quadIn),this.scaled=!0,this.rel=this.globalToLocal(mainStage.mouseX,
mainStage.mouseY))};c.handleRelease=function(a){mainStage.removeEventListener("stagemousemove",this.drawLine);mainStage.removeEventListener("stagemouseup",this.endDraw);this.dispatchEvent({type:"SelectEvent",param:this})};c.drawLine=function(a){a=a.target;for(var b,c=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1),f=0;f<c.length;f++)if(c[f].parent.scaled){b=c[f].parent;break}null!=b&&(b.x=a.mouseX-b.rel.x,b.y=a.mouseY-b.rel.y,b.getChildByName("bg").graphics.clear().beginStroke("#"+Math.floor(16777215*
Math.random())).beginFill("#"+Math.floor(16777215*Math.random())).drawRect(0,0,a.mouseX,a.mouseY))};c.endDraw=function(a){a=a.target;var b;a=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1);for(var c=0;c<a.length;c++)if(a[c].parent.scaled){b=a[c].parent;break}console.log(b.scaled);null!=b&&(b.scaled=!1,createjs.Tween.get(b,{override:!0}).to({scaleX:1,scaleY:1},100,createjs.Ease.quadIn))};c.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};k.FormShape=createjs.promote(g,"Container")})(window.WBdraw);(function(k){function g(a,b){this.Container_constructor();this.id=this.name=a;this.color=b;this.hi_Y=0;this.Controller=null;this.matrix=new createjs.Matrix2D;this.angle=Math.PI/12;this.currentMenu="";this.options={};this.subscriberWL={select:!0,line:!0,fill:!0,math:!0,media:!0,select:!1,print:!0,clear:!0,"delete":!0};this.hostWL={select:!0,line:!0,fill:!0,math:!0,media:!0,select:!0,print:!0,clear:!0,"delete":!0};this.options.BR=[{name:"select",btns:{icon:"ss.png",hint:"select opject",action:"select"}},
{name:"line",btns:{icon:"ss.png",hint:"line",">":[{name:"free",icon:"ss.png",action:"method1",hint:""},{name:"straight",icon:"ss.png",action:"method1",hint:""},{name:"bezier",icon:"ss.png",action:"method1",hint:""}]}},{name:"fill",btns:{icon:"ss.png",hint:"fill",">":[{name:"square",icon:"ss.png",action:"method1",hint:""},{name:"circle",icon:"ss.png",action:"method1",hint:""},{name:"star",icon:"ss.png",action:"method1",hint:""}]}},{name:"math",btns:{icon:"ss.png",hint:"math",">":[{name:"sqrt",icon:"ss.png",
action:"method1",hint:""},{name:"axis",icon:"ss.png",action:"method1",hint:""},{name:"graph",icon:"ss.png",action:"method1",hint:""}]}},{name:"media",btns:{icon:"ss.png",hint:"media",">":[{name:"ppt",icon:"ss.png",action:"method1",hint:""},{name:"video",icon:"ss.png",action:"method1",hint:""}]}},{name:"select_area",btns:{icon:"ss.png",hint:"selectable area",">":[{name:"add",icon:"ss.png",action:"method1",hint:""},{name:"remove",icon:"ss.png",action:"method1",hint:""}]}},{name:"print",btns:{icon:"ss.png",
hint:"selectable area",action:"print"}},{name:"clear",btns:{icon:"ss.png",hint:"selectable area",action:"print"}},{name:"delete",btns:{icon:"ss.png",hint:"selectable area",action:"print"}}];this.options.EN=[{name:"select",btns:{icon:"ss.png",hint:"select opject",action:"select"}},{name:"line",btns:{icon:"ss.png",hint:"line",">":[{name:"free",icon:"ss.png",action:"method1",hint:""},{name:"straight",icon:"ss.png",action:"method1",hint:""},{name:"bezier",icon:"ss.png",action:"method1",hint:""}]}},{name:"fill",
btns:{icon:"ss.png",hint:"fill",">":[{name:"square",icon:"ss.png",action:"method1",hint:""},{name:"circle",icon:"ss.png",action:"method1",hint:""},{name:"star",icon:"ss.png",action:"method1",hint:""}]}},{name:"math",btns:{icon:"ss.png",hint:"math",">":[{name:"sqrt",icon:"ss.png",action:"method1",hint:""},{name:"axis",icon:"ss.png",action:"method1",hint:""},{name:"graph",icon:"ss.png",action:"method1",hint:""}]}},{name:"media",btns:{icon:"ss.png",hint:"media",">":[{name:"ppt",icon:"ss.png",action:"method1",
hint:""},{name:"video",icon:"ss.png",action:"method1",hint:""}]}},{name:"select_area",btns:{icon:"ss.png",hint:"selectable area",">":[{name:"add",icon:"ss.png",action:"method1",hint:""},{name:"remove",icon:"ss.png",action:"method1",hint:""}]}},{name:"print",btns:{icon:"ss.png",hint:"selectable area",action:"print"}},{name:"clear",btns:{icon:"ss.png",hint:"selectable area",action:"print"}},{name:"delete",btns:{icon:"ss.png",hint:"selectable area",action:"print"}}];this.setup()}function c(a,c){b(a.parent.parent)}
function a(a,b){}function b(a){createjs.Tween.get(a.submenu,{override:!0}).to({x:a.menucontain.width,scaleX:0},250,createjs.Ease.quadIn);createjs.Tween.get(a.menucontain,{override:!0}).to({x:0,scaleX:1},250,createjs.Ease.quadIn);window.WBdraw.trace("-----\x3eOUT");window.WBdraw.trace(a);window.WBdraw.trace(a.hi_Y);if(0!=a.hi_Y){var b=a.getChildByName("hi");createjs.Tween.get(b,{override:!0}).to({y:a.hi_Y},250,createjs.Ease.quadIn)}}function e(a,b){var e=a.parent.parent;void 0==e.options&&console.log("[E] submenu functions out of context. Please make sure function is delegated");
var g=void 0;null==g&&(g="EN");var h=e.options[g];stot=h.length;g=e.hostWL=null;if(e.submenu.currentMenu!=b){e.submenu.requestedMenu(b);e.submenu.removeAllBtns();var k=new WBdraw.Button("back","back.png","back to menu","back","#999",c);e.submenu.addChild(k);g=k;for(k=0;k<stot;++k){var t=h[k];if(e.subscriberWL[t.name]&&t.name==b){h=t.btns[">"];stot=h.length;for(t=0;t<stot;++t)k=new WBdraw.Button(h[t].name,h[t].icon,h[t].hint,h[t].name,"#"+Math.floor(16777215*Math.random()).toString(16),f),null!=g?
(k.x=0,k.y=g.y+g.height+10):k.x=k.y=0,k.alpha=.5,e.submenu.addChild(k),g=k;break}}window.WBdraw.trace(".........FINISHED ");e.submenu.setSize(e.menucontain.width,e.menucontain.height,"#"+Math.floor(16777215*Math.random()).toString(16),!0);e.submenu.x=e.menucontain.width;e.submenu.scaleX=0}createjs.Tween.get(e.submenu,{override:!0}).to({x:0,scaleX:1},250,createjs.Ease.quadIn);createjs.Tween.get(e.menucontain,{override:!0}).to({x:0,scaleX:.01},250,createjs.Ease.quadIn);window.WBdraw.trace("-----\x3eIN");
window.WBdraw.trace(e.hi_Y);0!=e.hi_Y&&(e=e.getChildByName("hi"),createjs.Tween.get(e,{override:!0}).to({y:-20},250,createjs.Ease.quadIn))}function f(a,c){var e=a.parent.parent;console.log(a.height);var f=e.getChildByName("hi");console.log(e.submenu);var g="",h="",k;if(""==e.submenu.currentMenu)g=a.name,k=a;else{k=e.menucontain.getChildByName(e.submenu.currentMenu);var C=4,w;a:{w=e.options.EN;tot=w.length;for(var B=0;B<tot;++B){var A=w[B],u=A.btns[">"];if(void 0!=u)for(var x=u.length,y=0;y<x;++y)if(u[y].name==
a.name){w=[A.name,a.name];break a}}w=[a.name]}1<w.length&&(g=w[0],h=w[1])}f.x=e.menucontain.x+e.menucontain.width;e.hi_Y=k.y;e.setHiSize(C,k.height,"#FF0000");window.WBdraw.trace("---==>> ||>>  main:"+g+"  sub:"+h);window.WBdraw.trace("........---------__bb__---\x3e>>>>   event Controller>>>>>   ");e.dispatchEvent({type:"MenuEvent",param:[g,h]});0==e.submenu.x&&b(e)}createjs.EventDispatcher.initialize(g.prototype);var h=createjs.extend(g,createjs.Container);h.getLayer=function(a){return this.layers[a]};
h.hi_Y=0;h.width=0;h.height=0;h.setup=function(){var a=new createjs.Shape,b=new createjs.Shape;a.alpha=1;a.name=a.id="bg";b.alpha=1;b.name=b.id="hi";this.menucontain=new WBdraw.MenuBar("wbmenu");this.submenu=new WBdraw.MenuBar("sub_wbmenu");this.menubuttons(this.options);this.addChild(a,this.menucontain,b,this.submenu);window.WBdraw.trace("box1");this.offset=10*Math.random();this.count=0};h.setSize=function(a,b,c){this.setBgSize(a,b,c);this.width=a;this.height=b;for(var e in this.layers)this.layers[e].setSize(a,
b,c);h.width=a;h.height=b};h.setBgSize=function(a,b,c){var e=this.getChildByName("bg");null!=e&&e.graphics.clear().beginStroke("#ccc").beginFill(c).drawRect(0,0,a,b)};h.setHiSize=function(a,b,c){var e=this.getChildByName("hi");null!=e&&e.graphics.clear().beginFill(c).drawRect(0,0,a,b)};h.getWidth=function(){window.WBdraw.trace("get width");return width};h.wbRegister=function(a,b){};h.clear=function(a,b){};h.wbSwitch=function(a){};h.unshift=function(a){};h.push=function(a){};h.handleClick=function(a){console.log("click1")};
h.handlePress=function(a){window.WBdraw.trace("pressing....21acfsa");this.controller.shapeStart();this.on("pressmove",this.drawLine)};h.handleRelease=function(a){this.controller.drawdone();this.off("pressmove",this.drawLine)};h.menubuttons=function(b,c){null==c&&(c="EN");options=b[c];stot=options.length;var g=this.hostWL=null,h=null,h=this.oInvoke,h=new WBdraw.Button("up","up.png","back to menu","up","#999",a);this.menucontain.addChild(h);for(var g=h,k=0;k<stot;++k){var z=options[k];this.subscriberWL[z.name]&&
(h=void 0==z.btns[">"]?f:h=e,h=new WBdraw.Button(z.name,z.btns.icon,z.btns.hint,z.name,"#"+Math.floor(16777215*Math.random()).toString(16),h),null!=g?(h.x=0,h.y=g.y+g.height+10):h.x=h.y=0,h.alpha=.5,this.menucontain.addChild(h,null==g?!0:!1),g=h)}window.WBdraw.trace("________done...");g=this.menucontain.getSize();console.log(g);createjs.Tween.get(this).wait(1).wait(300).call(this.setBgSize,[g.x,g.y,"#DDD"],this)};k.Menu=createjs.promote(g,"Container")})(window.WBdraw);(function(k){function g(a,b,c,f){this.Container_constructor();this.id=this.name=a;this.color=f;this.label=b;this.text=new createjs.Text("tools","20px Arial","#000");this.setup();this.currentMenu=""}var c=createjs.extend(g,createjs.Container);c.requestedMenu=function(a){this.currentMenu=a};c.addChild=function(a){console.log(a.id);this.Container_addChild(a);this.setSize(a.x+a.width,a.y+a.height,"#"+Math.floor(16777215*Math.random()).toString(16));a=this.children;for(var b in a)"btn"==a[b].type&&(a[b].x=
.5*Math.abs(this.width-a[b].width))};c.width=function(a){console.log("@@!!!!@@@  "+this.getWidth());this.Container_width(a)};c.removeAllBtns=function(){for(var a=this.children.length,b=0;b<a;++b)console.log(this.children[b]),"btn"==this.children[b].type&&(this.removeChild(this.children[b]),--a,--b)};c.setup=function(){var a=new createjs.Shape;a.name=a.id="bg";a.alpha=.5;this.addChild(a);this.offset=10*Math.random();this.count=0};c.width=0;c.height=0;c.setSize=function(a,b,c,f){var g=this.getChildByName("bg");
if(null==g)throw Error("FAILED to load bg in wbMenuBar");g.graphics.clear().beginStroke("#ccc").beginFill(c).drawRect(0,0,a,b);this.width=a;this.height=b;if(f)for(c=this.children.length,f=0;f<c;++f)"btn"==this.children[f].type&&(this.children[f].width=a),this.children[f].height=b};c.getWidth=function(){return width};c.getSize=function(){return new createjs.Point(this.width,this.height)};c.endDraw=function(a){a=a.target;var b;a=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1);for(var c=0;c<a.length;c++)if(a[c].parent.scaled){b=
a[c].parent;break}console.log(b.scaled);null!=b&&(b.scaled=!1,createjs.Tween.get(b,{override:!0}).to({scaleX:1,scaleY:1},100,createjs.Ease.quadIn))};k.MenuBar=createjs.promote(g,"Container")})(window.WBdraw);(function(k){function g(c,a,b){this.initialize(c,a,b)}g.PLATFORM_DESKTOP="desktop";g.PLATFORM_WP7="wp7";g.PLATFORM_WP8="wp8";g.PLATFORM_IPHONE="iPhone";g.PLATFORM_IPHONE3="iPhone3";g.PLATFORM_IPHONE_PINNED="iPhonePinned";g.PLATFORM_IPHONE3_PINNED="iPhone3Pinned";g.QUALITY_NORMAL=0;g.QUALITY_HIGH=1;g.QUALITY_LOW=2;g.prototype={touchEnabled:!1,isIOS:!1,width:1024,height:622,scaleFactor:1,platform:null,quality:g.QUALITY_NORMAL,initialize:function(c,a,b){null!=a&&(this.width=a);null!=b&&(this.height=
b);this.platform=c;switch(c){case g.PLATFORM_DESKTOP:this.width=1024;this.height=622;break;case g.PLATFORM_WP7:this.width=800;this.height=410;this.scaleFactor=.6;this.quality=g.QUALITY_LOW;break;case g.PLATFORM_WP8:this.width=1280;this.height=700;this.scaleFactor=.6;this.quality=g.QUALITY_HIGH;break;case g.PLATFORM_IPHONE:this.width=960,this.height=640,this.scaleFactor=.5,this.quality=g.QUALITY_HIGH}},toString:function(){return"[Config.ConfigWB]"}};k.ConfigWB=g})(window.WBdraw);
//# sourceMappingURL=final.map
