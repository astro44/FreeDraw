(function(){function h(a,b,c,f,g,e){this.Container_constructor();this.method=e;this.color=g;this.label=f;this.name=this.id=a;this.hint=c;this.icon=b;this.type="btn";this.height=this.width=0;this.setup()}var e=createjs.extend(h,createjs.Container);e.setup=function(){var a=new createjs.Text(this.label,"20px Arial","#000");a.textBaseline="top";a.textAlign="center";this.width=a.getMeasuredWidth()+30;this.height=a.getMeasuredHeight()+20;a.x=this.width/2;a.y=10;var b=new createjs.Shape;b.graphics.beginFill(this.color).drawRoundRect(0,
0,this.width,this.height,10);this.addChild(b,a);this.on("click",this.handleClick);this.on("rollover",this.handleRollOver);this.on("rollout",this.handleRollOver);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};e.handleClick=function(a){this.method(this,this.id)};e.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};window.Button=createjs.promote(h,"Container")})();var BUILD="debug";
(function(){function h(){}function e(a){a=mainStage.getChildByName("BASE_main");a.width!=mainStage.canvas.width&&a.setSize(mainStage.canvas.width,mainStage.canvas.height,"#CCC");mainStage.update()}h.main=function(){(new h).initialize()};h.prototype.initialize=function(){this.mainCanvas=document.getElementById("mainCanvas");this.mainCanvas.setStrokeStyle="#FF0000";this.mainStage=new createjs.Stage(this.mainCanvas);this.mainStage.snapToPixelsEnabled=!0;this.mainStage.id="mainIn";window.mainStage=this.mainStage;
createjs.Ticker.addEventListener("tick",this.mainStage);createjs.Ticker.timingMode=createjs.Ticker.RAF;createjs.Ticker.setFPS(30);createjs.Ticker.on("tick",e);createjs.Touch.enable(this.mainStage);this.mainStage.enableMouseOver();console.log("main...start");var a=new CanvasContainer("BASE_main","#ccc");this.mainStage.addChild(a)};window.Main=h})();this.ndgmr=this.ndgmr||{};
(function(){var h=document.createElement("canvas"),e=h.getContext("2d");e.save();var a=document.createElement("canvas"),b=a.getContext("2d");b.save();var c=[],f=function(a,b){var c,f;c=m(a);f=m(b);return l(c,f)};ndgmr.checkRectCollision=f;ndgmr.checkPixelCollision=function(c,n,k,m){if(ndgmr.DEBUG||ndgmr.DEBUG_COLLISION)document.body.appendChild(h),document.body.appendChild(a);m=m||!1;intersection=f(c,n);if(!intersection)return!1;k=Math.min(.99999,k||0);h.width=intersection.width;h.height=intersection.height;
a.width=intersection.width;a.height=intersection.height;c=g(intersection,c,e,1);a:{n=g(intersection,n,b,2);var l=intersection.width,v=intersection.height,y,z,u,w,x=3,t={x:Infinity,y:Infinity,x2:-Infinity,y2:-Infinity};for(w=0;w<v;++w)for(u=0;u<l;++u){y=c.length>x+1?c[x]/255:0;z=n.length>x+1?n[x]/255:0;if(y>k&&z>k)if(m)u<t.x&&(t.x=u),u>t.x2&&(t.x2=u),w<t.y&&(t.y=w),w>t.y2&&(t.y2=w);else{c={x:u,y:w,width:1,height:1};break a}x+=4}Infinity!=t.x?(t.width=t.x2-t.x+1,t.height=t.y2-t.y+1,c=t):c=null}if(c)c.x+=
intersection.x,c.x2+=intersection.x,c.y+=intersection.y,c.y2+=intersection.y;else return!1;return c};var g=function(a,b,f,g){var e,m,l;b instanceof createjs.Bitmap?m=b.image:b instanceof createjs.Sprite&&(frame=b.spriteSheet.getFrame(b.currentFrame),e=frame.image.src+":"+frame.rect.x+":"+frame.rect.y+":"+frame.rect.width+":"+frame.rect.height,c[e]?m=c[e]:c[e]=m=createjs.SpriteSheetUtils.extractFrame(b.spriteSheet,b.currentFrame));e=b.globalToLocal(a.x,a.y);f.restore();f.save();f.rotate(k(b,"rotation")*
(Math.PI/180));f.scale(k(b,"scaleX","*"),k(b,"scaleY","*"));f.translate(-e.x-a["rect"+g].regX,-e.y-a["rect"+g].regY);void 0!=(l=b.sourceRect)?f.drawImage(m,l.x,l.y,l.width,l.height,0,0,l.width,l.height):f.drawImage(m,0,0,m.width,m.height);return f.getImageData(0,0,a.width,a.height).data},k=function(a,b,c){c=c||"+";if(a.parent&&a.parent[b]){var f=a[b];a=k(a.parent,b,c);return"*"==c?f*a:f+a}return a[b]},l=function(a,b){var c,f,e,g,k,m,l,h;c=a.x+(e=a.width/2);f=a.y+(g=a.height/2);k=b.x+(m=b.width/2);
l=b.y+(h=b.height/2);c=Math.abs(c-k)-(e+m);f=Math.abs(f-l)-(g+h);return 0>c&&0>f?(c=Math.min(Math.min(a.width,b.width),-c),f=Math.min(Math.min(a.height,b.height),-f),{x:Math.max(a.x,b.x),y:Math.max(a.y,b.y),width:c,height:f,rect1:a,rect2:b}):null};ndgmr.calculateIntersection=l;var m=function(a){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;a=a.children;var c=a.length,f,e;for(e=0;e<c;e++)f=m(a[e]),f.x<b.x&&(b.x=f.x),f.y<b.y&&(b.y=f.y),
f.x+f.width>b.x2&&(b.x2=f.x+f.width),f.y+f.height>b.y2&&(b.y2=f.y+f.height);Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{var g,k,l;a instanceof createjs.Bitmap?(f=a.sourceRect||a.image,g=f.width,k=f.height):a instanceof createjs.Sprite?a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image?(f=a.spriteSheet.getFrame(a.currentFrame),g=
f.rect.width,k=f.rect.height,c=f.regX,l=f.regY):(b.x=a.x||0,b.y=a.y||0):(b.x=a.x||0,b.y=a.y||0);c=c||0;g=g||0;l=l||0;k=k||0;b.regX=c;b.regY=l;f=a.localToGlobal(0-c,0-l);e=a.localToGlobal(g-c,k-l);g=a.localToGlobal(g-c,0-l);a=a.localToGlobal(0-c,k-l);b.x=Math.min(Math.min(Math.min(f.x,e.x),g.x),a.x);b.y=Math.min(Math.min(Math.min(f.y,e.y),g.y),a.y);b.width=Math.max(Math.max(Math.max(f.x,e.x),g.x),a.x)-b.x;b.height=Math.max(Math.max(Math.max(f.y,e.y),g.y),a.y)-b.y}return b};ndgmr.getBounds=m})();(function(){function h(a,b,c){this.Container_constructor();this.method=c;this.color=b;this.name=this.id=a;this.type="btn";this.height=this.width=0;this.setup()}var e=createjs.extend(h,createjs.Container);e.setup=function(){this.height=this.width=30;var a=new createjs.Shape;a.graphics.beginStroke("#000");a.graphics.beginFill(this.color).drawCircle(0,0,10);this.addChild(a);this.on("click",this.handleClick);this.on("rollover",this.handleRollOver);this.on("rollout",this.handleRollOver);this.cursor="pointer";
this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};e.handleClick=function(a){this.method(this,this.id)};e.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};window.resizeBtn=createjs.promote(h,"Container")})();(function(){function h(a,b,c){this.Container_constructor();this.id=this.name=a;this.transparent=c;this.color=b;this.setup()}var e=createjs.extend(h,createjs.Container);e.setup=function(){var a=new createjs.Shape;a.alpha=1;a.name=a.id="bg";this.on("click",this.handleClick);this.on("mousedown",this.handlePress);this.on("pressup",this.handleRelease);this.on("pressmove",this.drawLine);console.log("box1");this.offset=10*Math.random();this.count=0};e.width=0;e.height=0;e.setSize=function(a,b,c){e.width=
a;e.height=b;if(!this.transparent){var f=this.getChildByName("bg");console.log("resizerrrBy");f.graphics.clear().beginStroke("#ccc").beginFill(c).drawRect(0,0,a,b)}};e.getWidth=function(){console.log("get width");return width};e.handleClick=function(a){console.log("click");a.stopImmediatePropagation()};e.handlePress=function(a){console.log(a);console.log("press")};e.handleRelease=function(a){console.log("release");a.stopImmediatePropagation()};e.drawLine=function(a){console.log("draw");a.stopImmediatePropagation()};
e.endDraw=function(a){console.log("enddraw");a.stopImmediatePropagation()};window.Box=createjs.promote(h,"Container")})();(function(){function h(a,b){this.name=a;this.actions=[];this.baseSAND=this.baseDECK=this.baseBG=null;this.baseBG=b.cvsMAIN;this.baseDECK=b.cvsDECK;this.baseSAND=b.cvsSAND;this._tempModel=this._sandboxRect=this._isConnector=this._undoRange=this._objectInit=this.shapeNOW=this._currentdeckIndex=this._username=this.menu=null;this.setup()}function e(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function a(a){console.log("=========commited-========");
console.log(a)}function b(a){console.log("=====aa  aa  aa====onSelect-========");console.log(a);this.dispatchEvent(a)}h.prototype={setName:function(a){this._username=a},setMenu:function(a){this.menu=a;a.addEventListener("MenuEvent",this.menuEventProxy.bind(this))},setLayers:function(a){this.baseBG=a.cvsMAIN;this.baseDECK=a.cvsDECK;this.baseSAND=a.cvsSAND},drawinit:function(a,b,g){this._objectInit=!1;this._tempModel={classIn:a,type:b,path:g}},shapeTweenUpdate:function(a,b){b.alpha=.5;createjs.Tween.get(owner.form,
{override:!0}).to({x:b.x,y:b.y,alpha:1},300,createjs.Ease.quadIn)},menuEventProxy:function(a){this.drawinit(a.param[0],a.param[1])},shapeStart:function(){null!=this.shapeNOW&&(console.log("...found shape in use..."),this.shapeNOW._commited||this.shapeNOW.drawPerm(this.shapeNOW,!1));var c=this.baseBG,f=this._tempModel.type;switch(this._tempModel.type){case "select":break;case "ungroup":break;default:this._objectInit||(console.log(this._tempModel.classIn),f=new (window["Form"+e(this._tempModel.classIn)])("rcolvi_"+
f,f),console.log("Object in.."+c),f.x=mainStage.mouseX,f.y=mainStage.mouseY,c.addChild(f),console.log("22Object in.."+this._tempModel.classIn),this.shapeNOW=f,f.addEventListener("SelectEvent",b.bind(this)),f.addEventListener("CommitEvent",a.bind(this)))}},drawing:function(a,b){0==this._objectInit&&this.shapeNOW.drawTemp(a,b)},drawdone:function(){console.log("...done nwo");this.shapeNOW.drawPerm(this.shapeNOW,!1);this.shapeNOW=null},clearObject:function(){this.shapeNOW=null},setup:function(){console.log("wbController createDocumentFragment ====>?"+
this.name)}};createjs.EventDispatcher.initialize(h.prototype);h.findDistance=function(){return 23};window.Controller=createjs.promote(h,"Controller")})();(function(){function h(a,b){this.Container_constructor();this.id=this.name=a;this.color="";this.type=b;this.limitDraw=!1;this.rect=null;this.segSize=12;this.regY=this.regX=0;this.scaled=!1;this.rel=null;this.setup()}createjs.EventDispatcher.initialize(h.prototype);var e=createjs.extend(h,createjs.Container);e.setup=function(){this.points=[];this.bg=new createjs.Shape;this.hitHelper=new createjs.Shape;this.bg.hitArea=this.hitHelper;this.addChild(this.bg);this.on("mousedown",this.handlePress);this.on("pressup",
this.handleRelease);this.on("pressmove",this.moveLocally);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};e.drawTemp=function(a,b){e[this.type](this,a,b)};e.drawPerm=function(a,b){if(a.id==this.id){try{var c=e[this.type+"Perm"](this,a,b)}catch(f){throw console.log(f),"[E] No function matches:"+this.type+"Perm() in FormLine (wbFormLine.js)";}var g={type:"CommitEvent",param:this};c&&this.dispatchEvent(g)}};e.width=0;e.height=0;e.setSize=function(a,b,c){};e.getWidth=
function(){return width};e.moveLocally=function(a){this.x=a.stageX-this.rel.x+this.regX;this.y=a.stageY-this.rel.y+this.regY;update=!0;a.stopImmediatePropagation()};e.moveSTART=function(a){a.stopImmediatePropagation();a=a.target;for(var b,c=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1),f=0;f<c.length;f++)if(c[f].parent.scaled){b=c[f].parent;break}null!=b&&(b.x=a.mouseX-b.rel.x+b.regX,b.y=a.mouseY-b.rel.y+b.regY,console.log(b.rel+","+b.regX))};e.moveEND=function(a){a=a.target;var b;a=a.getObjectsUnderPoint(a.mouseX,
a.mouseY,1);for(var c=0;c<a.length;c++)if(a[c].parent.scaled){b=a[c].parent;break}null!=b&&(b.scaled=!1,createjs.Tween.get(b,{override:!0}).to({scaleX:1,scaleY:1},100,createjs.Ease.quadIn))};e.handlePress=function(a){mainStage.addEventListener("stagemousemove",this.moveSTART);mainStage.addEventListener("stagemouseup",this.moveEND);this.scaled||(createjs.Tween.get(this,{override:!0}).to({scaleX:1.05,scaleY:1.05},100,createjs.Ease.quadIn),this.scaled=!0,this.rel=this.globalToLocal(mainStage.mouseX,
mainStage.mouseY),a.stopImmediatePropagation())};e.handleRelease=function(a){mainStage.removeEventListener("stagemousemove",this.moveSTART);mainStage.removeEventListener("stagemouseup",this.moveEND);a.stopImmediatePropagation();this.dispatchEvent({type:"SelectEvent",param:this})};e.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};e.square=function(a,b,c){b=a.bg.globalToLocal(b,c);c=a.bg.graphics;c.clear();a.points=[];c.setStrokeStyle(5);c.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));
c.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));c.rect(0,0,b.x,b.y);a.points.push(b);c.endStroke();c.endFill()};e.squarePerm=function(a,b,c){b=a.bg.graphics;c=a.bg.hitArea.graphics;b.clear();c.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;lc=a.points[0];b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));b.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));
c.setStrokeStyle(10);c.beginStroke("#000");c.beginFill("red");c.rect(0,0,lc.x,lc.y);b.rect(0,0,lc.x,lc.y);b.endStroke();c.endStroke();c.endFill();b.endFill();return!0};e.circle=function(a,b,c){b=a.bg.globalToLocal(b,c);c=a.bg.graphics;c.clear();a.points=[];c.setStrokeStyle(5);c.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));c.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));c.drawEllipse(0,0,b.x,b.y);a.points.push(b);c.endStroke();c.endFill()};e.circlePerm=function(a,
b,c){b=a.bg.graphics;c=a.bg.hitArea.graphics;b.clear();c.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;lc=a.points[0];b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));b.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));c.setStrokeStyle(10);c.beginStroke("#000");c.beginFill("red");c.drawEllipse(0,0,lc.x,lc.y);b.drawEllipse(0,0,lc.x,lc.y);b.endStroke();c.endStroke();
c.endFill();b.endFill();return!0};e.star=function(a,b,c){a.bg.globalToLocal(b,c);var f={},g=a.bg.graphics;g.clear();a.points=[];g.setStrokeStyle(5);g.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));g.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));console.log("---=-=-=--=-=-=-=-=>>>>");f.radius=b/mainStage.canvas.width*200;f.pointy=c/mainStage.canvas.height*.9;f.points=5;g.drawPolyStar(0,0,f.radius,f.points,f.pointy,-90);a.points.push(f);g.endStroke();g.endFill()};
e.starPerm=function(a,b,c){b=a.bg.graphics;c=a.bg.hitArea.graphics;b.clear();c.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;sPos=a.points[0];b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));b.beginFill("#"+Math.floor(16777215*Math.random()).toString(16));c.setStrokeStyle(10);c.beginStroke("#000");c.beginFill("red");c.drawPolyStar(0,0,sPos.radius,sPos.points,sPos.pointy,
-90);b.drawPolyStar(0,0,sPos.radius,sPos.points,sPos.pointy,-90);b.endStroke();c.endStroke();c.endFill();b.endFill();return!0};window.FormFill=createjs.promote(h,"Container")})();(function(){function h(a,b){this.Container_constructor();this.id=this.name=a;this.color="";this.type=b;this.limitDraw=!1;this.rect=null;this.segSize=12;this.regY=this.regX=0;this.scaled=!1;this.rel=null;this.setup()}createjs.EventDispatcher.initialize(h.prototype);var e=createjs.extend(h,createjs.Container);e.setup=function(){this.points=[];this.bg=new createjs.Shape;this.hitHelper=new createjs.Shape;this.bg.hitArea=this.hitHelper;this.addChild(this.bg);this.on("mousedown",this.handlePress);this.on("pressup",
this.handleRelease);this.on("pressmove",this.moveLocally);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};e.drawTemp=function(a,b){e[this.type](this,a,b)};e.drawPerm=function(a,b){if(a.id==this.id){try{var c=e[this.type+"Perm"](this,a,b)}catch(f){throw console.log(f),"[E] No function matches:"+this.type+"Perm() in FormLine (wbFormLine.js)";}var g={type:"CommitEvent",param:this};c&&this.dispatchEvent(g)}};e.width=0;e.height=0;e.setSize=function(a,b,c){};e.getWidth=
function(){return width};e.moveLocally=function(a){this.x=a.stageX-this.rel.x+this.regX;this.y=a.stageY-this.rel.y+this.regY;update=!0;a.stopImmediatePropagation()};e.moveSTART=function(a){a.stopImmediatePropagation();a=a.target;for(var b,c=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1),f=0;f<c.length;f++)if(c[f].parent.scaled){b=c[f].parent;break}null!=b&&(b.x=a.mouseX-b.rel.x+b.regX,b.y=a.mouseY-b.rel.y+b.regY,console.log(b.rel+","+b.regX))};e.moveEND=function(a){a=a.target;var b;a=a.getObjectsUnderPoint(a.mouseX,
a.mouseY,1);for(var c=0;c<a.length;c++)if(a[c].parent.scaled){b=a[c].parent;break}null!=b&&(b.scaled=!1,createjs.Tween.get(b,{override:!0}).to({scaleX:1,scaleY:1},100,createjs.Ease.quadIn))};e.handlePress=function(a){mainStage.addEventListener("stagemousemove",this.moveSTART);mainStage.addEventListener("stagemouseup",this.moveEND);this.scaled||(createjs.Tween.get(this,{override:!0}).to({scaleX:1.05,scaleY:1.05},100,createjs.Ease.quadIn),this.scaled=!0,this.rel=this.globalToLocal(mainStage.mouseX,
mainStage.mouseY),a.stopImmediatePropagation())};e.handleRelease=function(a){mainStage.removeEventListener("stagemousemove",this.moveSTART);mainStage.removeEventListener("stagemouseup",this.moveEND);a.stopImmediatePropagation();this.dispatchEvent({type:"SelectEvent",param:this})};e.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};e.straight=function(a,b,c){b=a.bg.globalToLocal(b,c);c=a.bg.graphics;c.clear();a.points=[];c.setStrokeStyle(5);d=Math.sqrt(b.x*b.x+b.y*b.y);r=d%a.segSize;tot=
d/a.segSize;for(var f=0,g=0,e=0;e<tot;++e){var l=e/tot*b.x,m=e/tot*b.y;c.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));c.moveTo(f,g);c.lineTo(l,m);f=l;g=m}c.moveTo(f,g);c.lineTo(b.x,b.y);a.points.push(b);c.endStroke()};e.straightPerm=function(a,b,c){b=a.bg.graphics;c=a.bg.hitArea.graphics;b.clear();c.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;lc=a.points[0];b.setStrokeStyle(5);b.beginStroke("#"+
Math.floor(16777215*Math.random()).toString(16));c.setStrokeStyle(10);c.beginStroke("#000");c.beginFill("red");c.moveTo(0,0);b.moveTo(0,0);b.lineTo(lc.x,lc.y);c.lineTo(lc.x,lc.y);b.endStroke();c.endStroke();c.endFill();a.setDimension(a,lc.x,lc.y);return!0};e.free=function(a,b,c){var f=a.bg.graphics,e=a.points[a.points.length-1],k=0;b=a.bg.globalToLocal(b,c);f.setStrokeStyle(5);f.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));void 0==e&&(e=new createjs.Point(0,0));k=b.y;c=e.x;var l=
e.y,k=Math.sqrt((c-=b.x)*c+(l-=k)*l);k>a.segSize&&(f.moveTo(e.x,e.y),f.lineTo(b.x,b.y),f.endStroke(),a.points.push(b))};e.freePerm=function(a,b,c){b=a.bg.graphics;c=a.bg.hitArea.graphics;console.log(a);var f=a.points.length;if(0==f)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;new createjs.Point(0,0);b.clear();b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));c.setStrokeStyle(10);c.beginStroke("#000");
c.beginFill("red");c.moveTo(0,0);b.moveTo(0,0);for(var e=0,k=0,l=0,m=0,h=0;h<f;++h){var n=a.points[h];b.lineTo(n.x,n.y);c.lineTo(n.x,n.y);n.x>k&&(k=n.x);n.y>e&&(e=n.y);n.x<l&&(l=n.x);n.y<m&&(m=n.y)}a.bg.x=0>l?Math.abs(l):0;a.bg.y=0<m?Math.abs(m):0;b.endStroke();c.endStroke();c.endFill();a.x-=a.bg.x;a.y+=a.bg.y;a.rect=new createjs.Rectangle(0,0,k,e);a.regX=.5*k;a.regY=.5*e;a.x+=a.regX;a.y+=a.regY;a.setDimension(a,a.rect.width,a.rect.height);return!0};e.bezier=function(a,b,c){var f={x:0,y:0},e=a.bg.graphics;
c=a.bg.globalToLocal(b,c);e.clear();a.points=[];e.setStrokeStyle(5);b=Math.round(c.x);c=Math.round(c.y);f.fx=b;f.cx=f.fx;f.fy=c;f.cy=f.y;e.setStrokeStyle(1);e.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));e.moveTo(f.fx,f.fy);e.lineTo(f.cx,f.cy);e.lineTo(f.x,f.y);e.setStrokeStyle(5);e.bezierCurveTo(f.fx,f.fy,f.cx,f.cy,f.x,f.y);a.points.push(f);e.endStroke()};e.bezierPerm=function(a,b,c){var f=a.points.length;b=a.bg.graphics;c=a.bg.hitArea.graphics;b.clear();c.clear();if(0==f)return b=
a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;f=a.points[0];c.setStrokeStyle(25);c.beginStroke("#000");b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));b.bezierCurveTo(f.fx,f.fy,f.cx,f.cy,f.x,f.y);c.bezierCurveTo(f.fx,f.fy,f.cx,f.cy,f.x,f.y);b.endStroke();c.endStroke();a.setDimension(a,f.cx,f.fy);return!0};e.connector=function(a,b,c){};e.connectorPerm=function(a,b,c){};e.connectorFollowEdge=function(a,b,
c){point=new createjs.Point(b.x+.5*b.width,b.y+.5*b.height);target=new createjs.Point(c.x+.5*c.width,c.y+.5*c.height);b=point.x-target.x;var f=point.y-target.y;a=f;b>f&&(a=b);b=Math.atan2(target.Y-point.Y,target.X-point.X);for(var f=canvas.getContext("2d"),e=0;e<a;++e){var k=2*Math.sin(b),l=2*Math.cos(b),k=new createjs.Point(c.x+l,c.y+k),k=f.getImageData(k.x,k.y,2,2).data,k="rgba("+k[pos]+","+k[pos+1]+","+k[pos+2]+","+k[pos+3]+")";"#CCCCCC"==k&&console.log("pixel found::"+k);console.log(" found::"+
k)}};e.setDimension=function(a,b,c){a.width=Math.abs(b);a.height=Math.abs(c);console.log(a.width+"x"+a.height)};window.FormLine=createjs.promote(h,"Container")})();(function(){function h(a,b){this.Container_constructor();this.id=this.name=a;this.color="";this.type=b;this.limitDraw=!1;this.rect=null;this.segSize=12;this.regY=this.regX=0;this.scaled=!1;this.boxr=this.box4=this.box3=this.box2=this.box1=this.formTarget=this.rel=null;this.setup()}function e(a,b){return""}function a(a,b,e){var k=e.x,l=b.y;e=e.y;d=Math.sqrt((k-=b.x)*k+(e-=l)*e);console.log("d=="+d);tot=d/12;k=b.x;l=b.y;for(e=0;e<tot;++e){var m=e/tot*b.x,h=e/tot*b.y;a.moveTo(k,l);a.lineTo(m,h);k=m;
l=h}}createjs.EventDispatcher.initialize(h.prototype);var b=createjs.extend(h,createjs.Container);b.setup=function(){this.points=[];this.bg=new createjs.Shape;this.box1=new resizeBtn("bx1","#FFF",e);this.box2=new resizeBtn("bx2","#FFF",e);this.box3=new resizeBtn("bx3","#FFF",e);this.box4=new resizeBtn("bx4","#FFF",e);this.boxr=new resizeBtn("bxr","#FFF",e);this.addChild(this.bg,this.box1,this.box2,this.box3,this.box4,this.boxr);this.offset=10*Math.random();this.count=0};b.width=0;b.height=0;b.handleRollOver=
function(a){this.alpha="rollover"==a.type?.4:1};b.wrapTarget=function(b,f){console.log("----------------\x3e>resizer");console.log(f);b.target=f;console.log(f.width+",X"+f.height+",   x:"+f.x+",Y:"+f.y);b.x=f.x;b.y=f.y;b.box1=b.box3.x=0;b.box1=b.box2.y=0;b.box2.x=f.width;b.box3.y=f.height;b.box4.x=f.width;b.box4.y=f.height;b.boxr.x=.5*f.width;b.boxr.y=-60;var e=this.bg.graphics;e.beginStroke("red");e.setStrokeStyle(2);var k=new createjs.Point(0,0),l=new createjs.Point(.5*f.width,0),m=new createjs.Point(f.width,
0),h=new createjs.Point(f.width,f.height),n=new createjs.Point(0,f.height),p=new createjs.Point(f.width,f.height),q=new createjs.Point(.5*f.width,-60);a(e,k,m);a(e,k,n);a(e,n,h);a(e,m,p);a(e,l,q)};b.straight=function(a,b,e){b=a.bg.globalToLocal(b,e);e=a.bg.graphics;e.clear();a.points=[];e.setStrokeStyle(5);d=Math.sqrt(b.x*b.x+b.y*b.y);r=d%a.segSize;tot=d/a.segSize;for(var k=0,l=0,m=0;m<tot;++m){var h=m/tot*b.x,n=m/tot*b.y;e.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));e.moveTo(k,
l);e.lineTo(h,n);k=h;l=n}e.moveTo(k,l);e.lineTo(b.x,b.y);a.points.push(b);e.endStroke()};b.straightPerm=function(a,b,e){b=a.bg.graphics;e=a.bg.hitArea.graphics;b.clear();e.clear();if(0==a.points.length)return b=a.parent,console.log(b.getNumChildren()),a.parent.removeChild(this),console.log(b.getNumChildren()),!1;lc=a.points[0];b.setStrokeStyle(5);b.beginStroke("#"+Math.floor(16777215*Math.random()).toString(16));e.setStrokeStyle(10);e.beginStroke("#000");e.beginFill("red");e.moveTo(0,0);b.moveTo(0,
0);b.lineTo(lc.x,lc.y);e.lineTo(lc.x,lc.y);b.endStroke();e.endStroke();e.endFill();return!0};window.FormResize=createjs.promote(h,"Container")})();(function(){function h(a,b,c,e){this.Container_constructor();this.id=this.name=a;this.color=e;this.type=c;this.label=b;this.setup()}var e=createjs.extend(h,createjs.Container);e.setup=function(){var a=new createjs.Text(this.label,"20px Arial","#000");a.name=a.id="txt";a.textBaseline="top";a.textAlign="center";var b=a.getMeasuredWidth()+30,c=a.getMeasuredHeight()+20;a.x=b/2;a.y=10;var e=new createjs.Shape;e.name=e.id="bg";e.graphics.setStrokeStyle(5);e.graphics.beginStroke("#"+Math.floor(16777215*
Math.random()).toString(16));e.graphics.beginFill(this.color).drawRoundRect(0,0,b,c,10);this.addChild(e,a);this.on("click",this.handleClick);this.on("rollover",this.handleRollOver);this.on("rollout",this.handleRollOver);this.on("mousedown",this.handlePress);this.on("pressup",this.handleRelease);this.cursor="pointer";this.mouseChildren=!1;this.offset=10*Math.random();this.count=0};e.handleClick=function(a){};e.hello=function(a){console.log(a);e.width=100};e.width=0;e.height=0;e.setSize=function(a,
b,c){target.getChildByName("bg").graphics.clear().beginStroke("#ccc").beginFill("#"+Math.floor(16777215*Math.random())).drawRect(0,0,a,b);e.width=a;e.height=b};e.getWidth=function(){return width};e.handlePress=function(a){mainStage.addEventListener("stagemousemove",this.drawLine);mainStage.addEventListener("stagemouseup",this.endDraw);console.log(this.id);this.scaled||(createjs.Tween.get(this,{override:!0}).to({scaleX:1.1,scaleY:1.1},100,createjs.Ease.quadIn),this.scaled=!0,this.rel=this.globalToLocal(mainStage.mouseX,
mainStage.mouseY))};e.handleRelease=function(a){mainStage.removeEventListener("stagemousemove",this.drawLine);mainStage.removeEventListener("stagemouseup",this.endDraw);this.dispatchEvent({type:"SelectEvent",param:this})};e.drawLine=function(a){a=a.target;for(var b,c=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1),e=0;e<c.length;e++)if(c[e].parent.scaled){b=c[e].parent;break}null!=b&&(b.x=a.mouseX-b.rel.x,b.y=a.mouseY-b.rel.y,b.getChildByName("bg").graphics.clear().beginStroke("#"+Math.floor(16777215*
Math.random())).beginFill("#"+Math.floor(16777215*Math.random())).drawRect(0,0,a.mouseX,a.mouseY))};e.endDraw=function(a){a=a.target;var b;a=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1);for(var c=0;c<a.length;c++)if(a[c].parent.scaled){b=a[c].parent;break}console.log(b.scaled);null!=b&&(b.scaled=!1,createjs.Tween.get(b,{override:!0}).to({scaleX:1,scaleY:1},100,createjs.Ease.quadIn))};e.handleRollOver=function(a){this.alpha="rollover"==a.type?.4:1};window.FormShape=createjs.promote(h,"Container")})();(function(){function h(a,b){this.Container_constructor();this.id=this.name=a;this.color=b;this.hi_Y=0;this.Controller=null;this.matrix=new createjs.Matrix2D;this.angle=Math.PI/12;this.currentMenu="";this.options={};this.subscriberWL={select:!0,line:!0,fill:!0,math:!0,media:!0,select:!1,print:!0,clear:!0,"delete":!0};this.hostWL={select:!0,line:!0,fill:!0,math:!0,media:!0,select:!0,print:!0,clear:!0,"delete":!0};this.options.BR=[{name:"select",btns:{icon:"ss.png",hint:"select opject",action:"select"}},
{name:"line",btns:{icon:"ss.png",hint:"line",">":[{name:"free",icon:"ss.png",action:"method1",hint:""},{name:"straight",icon:"ss.png",action:"method1",hint:""},{name:"bezier",icon:"ss.png",action:"method1",hint:""}]}},{name:"fill",btns:{icon:"ss.png",hint:"fill",">":[{name:"square",icon:"ss.png",action:"method1",hint:""},{name:"circle",icon:"ss.png",action:"method1",hint:""},{name:"star",icon:"ss.png",action:"method1",hint:""}]}},{name:"math",btns:{icon:"ss.png",hint:"math",">":[{name:"sqrt",icon:"ss.png",
action:"method1",hint:""},{name:"axis",icon:"ss.png",action:"method1",hint:""},{name:"graph",icon:"ss.png",action:"method1",hint:""}]}},{name:"media",btns:{icon:"ss.png",hint:"media",">":[{name:"ppt",icon:"ss.png",action:"method1",hint:""},{name:"video",icon:"ss.png",action:"method1",hint:""}]}},{name:"select_area",btns:{icon:"ss.png",hint:"selectable area",">":[{name:"add",icon:"ss.png",action:"method1",hint:""},{name:"remove",icon:"ss.png",action:"method1",hint:""}]}},{name:"print",btns:{icon:"ss.png",
hint:"selectable area",action:"print"}},{name:"clear",btns:{icon:"ss.png",hint:"selectable area",action:"print"}},{name:"delete",btns:{icon:"ss.png",hint:"selectable area",action:"print"}}];this.options.EN=[{name:"select",btns:{icon:"ss.png",hint:"select opject",action:"select"}},{name:"line",btns:{icon:"ss.png",hint:"line",">":[{name:"free",icon:"ss.png",action:"method1",hint:""},{name:"straight",icon:"ss.png",action:"method1",hint:""},{name:"bezier",icon:"ss.png",action:"method1",hint:""}]}},{name:"fill",
btns:{icon:"ss.png",hint:"fill",">":[{name:"square",icon:"ss.png",action:"method1",hint:""},{name:"circle",icon:"ss.png",action:"method1",hint:""},{name:"star",icon:"ss.png",action:"method1",hint:""}]}},{name:"math",btns:{icon:"ss.png",hint:"math",">":[{name:"sqrt",icon:"ss.png",action:"method1",hint:""},{name:"axis",icon:"ss.png",action:"method1",hint:""},{name:"graph",icon:"ss.png",action:"method1",hint:""}]}},{name:"media",btns:{icon:"ss.png",hint:"media",">":[{name:"ppt",icon:"ss.png",action:"method1",
hint:""},{name:"video",icon:"ss.png",action:"method1",hint:""}]}},{name:"select_area",btns:{icon:"ss.png",hint:"selectable area",">":[{name:"add",icon:"ss.png",action:"method1",hint:""},{name:"remove",icon:"ss.png",action:"method1",hint:""}]}},{name:"print",btns:{icon:"ss.png",hint:"selectable area",action:"print"}},{name:"clear",btns:{icon:"ss.png",hint:"selectable area",action:"print"}},{name:"delete",btns:{icon:"ss.png",hint:"selectable area",action:"print"}}];this.setup()}function e(a,c){b(a.parent.parent)}
function a(a,b){}function b(a){createjs.Tween.get(a.submenu,{override:!0}).to({x:a.menucontain.width,scaleX:0},250,createjs.Ease.quadIn);createjs.Tween.get(a.menucontain,{override:!0}).to({x:0,scaleX:1},250,createjs.Ease.quadIn);console.log("-----\x3eOUT");console.log(a);console.log(a.hi_Y);if(0!=a.hi_Y){var b=a.getChildByName("hi");createjs.Tween.get(b,{override:!0}).to({y:a.hi_Y},250,createjs.Ease.quadIn)}}function c(a,b){var c=a.parent.parent;void 0==c.options&&console.log("[E] submenu functions out of context. Please make sure function is delegated");
var g=void 0;null==g&&(g="EN");var h=c.options[g];stot=h.length;g=c.hostWL=null;if(c.submenu.currentMenu!=b){c.submenu.requestedMenu(b);c.submenu.removeAllBtns();var p=new Button("back","back.png","back to menu","back","#999",e);c.submenu.addChild(p);g=p;for(p=0;p<stot;++p){var q=h[p];if(c.subscriberWL[q.name]&&q.name==b){h=q.btns[">"];stot=h.length;for(q=0;q<stot;++q)p=new Button(h[q].name,h[q].icon,h[q].hint,h[q].name,"#"+Math.floor(16777215*Math.random()).toString(16),f),null!=g?(p.x=0,p.y=g.y+
g.height+10):p.x=p.y=0,p.alpha=.5,c.submenu.addChild(p),g=p;break}}console.log(".........FINISHED ");c.submenu.setSize(c.menucontain.width,c.menucontain.height,"#"+Math.floor(16777215*Math.random()).toString(16),!0);c.submenu.x=c.menucontain.width;c.submenu.scaleX=0}createjs.Tween.get(c.submenu,{override:!0}).to({x:0,scaleX:1},250,createjs.Ease.quadIn);createjs.Tween.get(c.menucontain,{override:!0}).to({x:0,scaleX:.01},250,createjs.Ease.quadIn);console.log("-----\x3eIN");console.log(c.hi_Y);0!=c.hi_Y&&
(c=c.getChildByName("hi"),createjs.Tween.get(c,{override:!0}).to({y:-20},250,createjs.Ease.quadIn))}function f(a,c){var e=a.parent.parent;console.log(a.height);var f=e.getChildByName("hi");console.log(e.submenu);var g="",h="",q;if(""==e.submenu.currentMenu)g=a.name,q=a;else{q=e.menucontain.getChildByName(e.submenu.currentMenu);var A=4,v;a:{v=e.options.EN;tot=v.length;for(var y=0;y<tot;++y){var z=v[y],u=z.btns[">"];if(void 0!=u)for(var w=u.length,x=0;x<w;++x)if(u[x].name==a.name){v=[z.name,a.name];
break a}}v=[a.name]}1<v.length&&(g=v[0],h=v[1])}f.x=e.menucontain.x+e.menucontain.width;e.hi_Y=q.y;e.setHiSize(A,q.height,"#FF0000");console.log("---==>> ||>>  main:"+g+"  sub:"+h);console.log("........---------__bb__---\x3e>>>>   event Controller>>>>>   ");e.dispatchEvent({type:"MenuEvent",param:[g,h]});0==e.submenu.x&&b(e)}createjs.EventDispatcher.initialize(h.prototype);var g=createjs.extend(h,createjs.Container);g.getLayer=function(a){return this.layers[a]};g.hi_Y=0;g.width=0;g.height=0;g.setup=
function(){var a=new createjs.Shape,b=new createjs.Shape;a.alpha=1;a.name=a.id="bg";b.alpha=1;b.name=b.id="hi";this.menucontain=new MenuBar("wbmenu");this.submenu=new MenuBar("sub_wbmenu");this.menubuttons(this.options);this.addChild(a,this.menucontain,b,this.submenu);console.log("box1");this.offset=10*Math.random();this.count=0};g.setSize=function(a,b,c){this.setBgSize(a,b,c);this.width=a;this.height=b;for(var e in this.layers)this.layers[e].setSize(a,b,c);g.width=a;g.height=b};g.setBgSize=function(a,
b,c){var e=this.getChildByName("bg");null!=e&&e.graphics.clear().beginStroke("#ccc").beginFill(c).drawRect(0,0,a,b)};g.setHiSize=function(a,b,c){var e=this.getChildByName("hi");null!=e&&e.graphics.clear().beginFill(c).drawRect(0,0,a,b)};g.getWidth=function(){console.log("get width");return width};g.wbRegister=function(a,b){};g.clear=function(a,b){};g.wbSwitch=function(a){};g.unshift=function(a){};g.push=function(a){};g.handleClick=function(a){console.log("click1")};g.handlePress=function(a){console.log("pressing....21acfsa");
this.controller.shapeStart();this.on("pressmove",this.drawLine)};g.handleRelease=function(a){this.controller.drawdone();this.off("pressmove",this.drawLine)};g.menubuttons=function(b,e){null==e&&(e="EN");options=b[e];stot=options.length;var g=this.hostWL=null,h=null,h=this.oInvoke,h=new Button("up","up.png","back to menu","up","#999",a);this.menucontain.addChild(h);for(var g=h,n=0;n<stot;++n){var p=options[n];this.subscriberWL[p.name]&&(h=void 0==p.btns[">"]?f:h=c,h=new Button(p.name,p.btns.icon,p.btns.hint,
p.name,"#"+Math.floor(16777215*Math.random()).toString(16),h),null!=g?(h.x=0,h.y=g.y+g.height+10):h.x=h.y=0,h.alpha=.5,this.menucontain.addChild(h,null==g?!0:!1),g=h)}console.log("________done...");g=this.menucontain.getSize();console.log(g);createjs.Tween.get(this).wait(1).wait(300).call(this.setBgSize,[g.x,g.y,"#DDD"],this)};window.Menu=createjs.promote(h,"Container")})();(function(){function h(a,b,c,e){this.Container_constructor();this.id=this.name=a;this.color=e;this.label=b;this.text=new createjs.Text("tools","20px Arial","#000");this.setup();this.currentMenu=""}var e=createjs.extend(h,createjs.Container);e.requestedMenu=function(a){this.currentMenu=a};e.addChild=function(a){console.log(a.id);this.Container_addChild(a);this.setSize(a.x+a.width,a.y+a.height,"#"+Math.floor(16777215*Math.random()).toString(16));a=this.children;for(var b in a)"btn"==a[b].type&&(a[b].x=
.5*Math.abs(this.width-a[b].width))};e.width=function(a){console.log("@@!!!!@@@  "+this.getWidth());this.Container_width(a)};e.removeAllBtns=function(){for(var a=this.children.length,b=0;b<a;++b)console.log(this.children[b]),"btn"==this.children[b].type&&(this.removeChild(this.children[b]),--a,--b)};e.setup=function(){var a=new createjs.Shape;a.name=a.id="bg";a.alpha=.5;this.addChild(a);this.offset=10*Math.random();this.count=0};e.width=0;e.height=0;e.setSize=function(a,b,c,e){var g=this.getChildByName("bg");
if(null==g)throw Error("FAILED to load bg in wbMenuBar");g.graphics.clear().beginStroke("#ccc").beginFill(c).drawRect(0,0,a,b);this.width=a;this.height=b;if(e)for(c=this.children.length,e=0;e<c;++e)"btn"==this.children[e].type&&(this.children[e].width=a),this.children[e].height=b};e.getWidth=function(){return width};e.getSize=function(){return new createjs.Point(this.width,this.height)};e.endDraw=function(a){a=a.target;var b;a=a.getObjectsUnderPoint(a.mouseX,a.mouseY,1);for(var c=0;c<a.length;c++)if(a[c].parent.scaled){b=
a[c].parent;break}console.log(b.scaled);null!=b&&(b.scaled=!1,createjs.Tween.get(b,{override:!0}).to({scaleX:1,scaleY:1},100,createjs.Ease.quadIn))};window.MenuBar=createjs.promote(h,"Container")})();(function(){function h(a,c){this.Container_constructor();this.id=this.name=a;this.color=c;this.layers={};this.Controller=null;this.setup()}function e(a){console.log(this.resizer);console.log("=========onSelect-=22222=======");this.resizer.handleRollOver(a);this.resizer.wrapTarget(this.resizer,a.param)}var a=createjs.extend(h,createjs.Container);a.getLayer=function(a){return this.layers[a]};a.setup=function(){var a=new createjs.Shape;a.alpha=1;a.name=a.id="bg";var c=new Box("cvsDECK","#ccc",!0),f=
new Box("cvsMAIN","#ccc",!0),g=new Box("cvsSAND","#ccc",!0);this.layers[c.id]=c;this.layers[f.id]=f;this.layers[g.id]=g;this.resizer=new FormResize("rsize","rtool");this.resizer.x=200;this.resizer.y=20;this.controller=new Controller("c1",this.layers);this.controller.addEventListener("SelectEvent",e.bind(this));this.addChild(a,c,f,g,this.resizer);this.menu=new Menu("m1",this.controller);this.controller.setMenu(this.menu);this.addChild(this.menu);this.on("click",this.handleClick);this.on("mousedown",
this.handlePress);this.on("pressup",this.handleRelease);console.log("box1");this.offset=10*Math.random();this.count=0;this.test_draw("line","free")};a.width=0;a.height=0;a.setSize=function(b,c,e){var g=this.getChildByName("bg");console.log("resizeBy");g.graphics.clear().beginStroke("#ccc").beginFill(e).drawRect(0,0,b,c);for(var h in this.layers)this.layers[h].setSize(b,c,e);a.width=b;a.height=c};a.getWidth=function(){console.log("get width");return width};a.wbRegister=function(a,c){};a.clear=function(a,
c){};a.wbSwitch=function(a){};a.unshift=function(a){};a.push=function(a){};a.handleClick=function(a){console.log("click1")};a.handlePress=function(a){console.log("pressing.33gfw...");this.controller.shapeStart();this.on("pressmove",this.drawLine);a.stopImmediatePropagation()};a.handleRelease=function(a){this.controller.drawdone();this.off("pressmove",this.drawLine)};a.drawLine=function(a){this.controller.drawing(mainStage.mouseX,mainStage.mouseY)};a.endDraw=function(a){console.log("enddraw1");this.off("pressmove",
this.drawLine)};a.test_draw=function(a,c){console.log("enddraw1");this.controller.drawinit(a,c)};window.CanvasContainer=createjs.promote(h,"Container")})();
//# sourceMappingURL=final.map
